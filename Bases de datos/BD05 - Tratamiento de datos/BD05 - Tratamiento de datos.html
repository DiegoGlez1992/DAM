<!DOCTYPE html>
<!-- saved from url=(0124)https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html -->
<html lang="es"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>DAM_BD05_Contenido_CIDEAD</title>
<link rel="shortcut icon" href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/favicon.ico" type="image/x-icon">
<meta name="author" content="Ministerio de Educación y FP">
<meta name="generator" content="eXeLearning 2.5 - exelearning.net">
<meta name="description" content="DAM_BD05_Contenido_CIDEAD">
<link rel="stylesheet" type="text/css" href="./BD05 - Tratamiento de datos_files/base.css">
<link rel="stylesheet" type="text/css" href="./BD05 - Tratamiento de datos_files/exe_lightbox.css">
<link rel="stylesheet" type="text/css" href="./BD05 - Tratamiento de datos_files/exe_highlighter.css">
<link rel="stylesheet" type="text/css" href="./BD05 - Tratamiento de datos_files/content.css">
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="./BD05 - Tratamiento de datos_files/exe_jquery.js.descarga"></script>
<script type="text/javascript" src="./BD05 - Tratamiento de datos_files/exe_lightbox.js.descarga"></script>
<script type="text/javascript" src="./BD05 - Tratamiento de datos_files/exe_highlighter.js.descarga"></script>
<script type="text/javascript" src="./BD05 - Tratamiento de datos_files/common_i18n.js.descarga"></script>
<script type="text/javascript" src="./BD05 - Tratamiento de datos_files/common.js.descarga"></script>
<meta name="viewport" content="width=device-width, initial-scale=1"><script type="text/javascript" src="./BD05 - Tratamiento de datos_files/exe_tooltips.js.descarga"></script><link type="text/css" rel="stylesheet" href="./BD05 - Tratamiento de datos_files/jquery.qtip.min.css"><script type="text/javascript" src="./BD05 - Tratamiento de datos_files/jquery.qtip.min.js.descarga"></script><script type="text/javascript" src="./BD05 - Tratamiento de datos_files/imagesloaded.pkg.min.js.descarga"></script></head>
<body class="exe-single-page js travelclub-common-loaded"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<header id="header" role="banner">
<div id="headerContent">
<h1>DAM_BD05_Contenido_CIDEAD</h1>
</div>
</header>
<section id="main" role="main">
<article class="node level-1-node" id="exe-node-0">
<header class="nodeDecoration">
<h1 id="exenode_0_Tratamientodedatos" class="nodeTitle">Tratamiento de datos.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id0-0">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta0_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 133px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_24.png" alt="Ada." title="Ada." class="elemento_derecha" width="133" height="200">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener"> Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Ada le ha preguntado a Juan sobre el estado actual del proyecto y él le comenta que está empezando el desarrollo de la aplicación y va a empezar a desarrollar una serie de procesos en los que se deberá almacenar la información que debe manejar la aplicación, así como modificarla o eliminar los datos que así lo requieran.</p>
<p>Estas acciones de tratamiento de la información deberán asegurar que no se obtengan resultados incorrectos, por errores en la ejecución de la aplicación o por las acciones de los usuarios, y además debe asegurar que los datos puedan ser accesibles por varios usuarios simultáneamente.</p>
<p>La aplicación requiere que se puedan dar de alta nuevos usuarios en la base de datos, así como juegos y partidas. Además se podrá modificar en un determinado momento la información personal de los usuarios, de los juegos, o añadir nuevos usuarios a las partidas. También asegurará la posibilidad de suprimir cualquiera de esos datos.</p>
<p>Se debe asegurar que, por ejemplo, una partida no haga referencia a usuario que han sido eliminado, o a juegos que no existen. Un usuario podrá ver reducido su crédito en un determinado momento, y la nueva información de su crédito sólo deberá ser accesible cuando haya finalizado el proceso de reducción del crédito, y no mientras se realiza esa actualización, ya que el crédito disponible no estará actualizado.</p>
<p>Por supuesto, al ser una aplicación <span lang="en">online</span>, distintos usuarios podrán realizar operaciones simultáneamente, como crear partidas al mismo tiempo.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper DestacadofpdIdevice" id="id58-0">
<div class="iDevice emphasis0">
<div class="iDevice_destacadofpd">
<div id="ta58_70" class="block iDevice_content">
<figure class="exe-figure exe-image position-center license-pd" style="width: 281px;"><img src="./BD05 - Tratamiento de datos_files/ministerio-de-educacion-y-formacion-profesional-web.jpg" alt="Ilustración del logotipo del Ministerio de Educación y Formación Profesional." title="Logotipo del Ministerio de Educación y Formación Profesional." width="281" height="69" hspace="auto" style="display: block; margin-left: auto; margin-right: auto;">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación y Formación Profesional.</a> <span class="license"><span class="sep">(</span><span>Dominio público</span><span class="sep">)</span></span></figcaption>
</figure>
<p style="text-align: center;"><span style="font-size: 13.5pt; color: #000000;"><strong>Materiales formativos de FP Online propiedad del Ministerio de Educación y Formación Profesional.</strong></span><br><a href="http://www.educacionyfp.gob.es/fpadistancia/comunes/aviso-legal-materiales.html">Aviso Legal</a></p>
</div>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-1">
<header class="nodeDecoration">
<h1 id="exenode_1_1Introduccin" class="nodeTitle">1.- Introducción.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id1-1">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta1_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_04.jpg" alt="Juan." title="Juan." class="elemento_derecha" width="200" height="134">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder a la Web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Juan le pregunta a Ana, la alumna que se encuentra en prácticas, qué mecanismos conoce para poder manipular los datos que deben encontrarse en una base de datos, de manera que se puedan añadir nuevos datos, modificarlos o eliminarlos. Ella recuerda que estudió una serie de sentencias o comandos del lenguaje <acronym title="Structured Query Language.">SQL</acronym> que permiten realizar todas esas operaciones, y que además, desde el entorno visual de la base de datos Oracle también se pueden realizar todas esas acciones de manera más cómoda para el usuario, pero menos flexible.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id2-1">
<div class="iDevice emphasis0">
<div id="ta2_73" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-gnu-gpl" style="width: 160px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R03_TRAT.png" alt="Lápiz sobre hoja de anotaciones." title="Tratamiento de datos." class="elemento_derecha" width="160" height="160">
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/File:Gnome-colors-alacarte.svg" target="_blank" class="author" title="Acceder a la web de la imagen (se abre en una ventana nueva)" rel="noopener">Victor C.</a> <span class="license"><span class="sep">(</span><a href="http://www.gnu.org/licenses/gpl.html" target="_blank" title="Acceder a la web sobre la licencia (se abre en una ventana nueva)" rel="noopener">GNU/GPL</a><span class="sep">)</span></span></figcaption>
</figure>
<p><br>Las bases de datos no tienen razón de ser sin la posibilidad de hacer operaciones para el tratamiento de la información almacenada en ellas. Por operaciones de tratamiento de datos se deben entender las acciones que permiten añadir información en ellas, modificarla o bien suprimirla.</p>
<p>En esta unidad podrás conocer que existen distintos medios para realizar el tratamiento de los datos. Desde la utilización de herramientas gráficas hasta el uso de instrucciones o sentencias del lenguaje SQL que permiten realizar ese tipo de operaciones de una forma menos visual pero con más detalle, flexibilidad y rapidez. El uso de unos mecanismos u otros dependerá de los medios disponibles y de nuestras necesidades como usuarios de la base de datos.</p>
<p>Pero la información no se puede almacenar en la base de datos sin tener en cuenta que debe seguir una serie de requisitos en las relaciones existentes entre las tablas que la componen. Todas las operaciones que se realicen respecto al tratamiento de los datos deben asegurar que las relaciones existentes entre ellos se cumplan correctamente en todo momento.</p>
<p>Por otro lado, la ejecución de las aplicaciones puede fallar en un momento dado y eso no debe impedir que la información almacenada sea incorrecta. O incluso el mismo usuario de las aplicaciones debe tener la posibilidad de cancelar una determinada operación y dicha cancelación no debe suponer un problema para que los datos almacenados se encuentren en un estado fiable.</p>
<p>Todo esto requiere disponer de una serie de herramientas que aseguren esa fiabilidad de la información, y que además puede ser consultada y manipulada en <a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#t8cd8f703-0401-dde9-85a4-e90fd3f712fb" id="link8cd8f703-0401-dde9-85a4-e90fd3f712fb" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="0" oldtitle="Sistemas multiusuario | " title="">sistemas multiusuario</a> sin que las acciones realizadas por un determinado usuario afecte negativamente a las operaciones de los demás usuarios.</p>
<div id="t8cd8f703-0401-dde9-85a4-e90fd3f712fb" class="exe-tooltip-text">
<p>Tales como las bases de datos multiusuario que permiten proveer servicio y procesamiento a múltiples usuarios simultáneamente.</p>
</div>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-2">
<header class="nodeDecoration">
<h1 id="exenode_2_2Edicindelainformacinmedianteherramientasgrficas" class="nodeTitle">2.- Edición de la información mediante herramientas gráficas.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id3-2">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta3_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_03.jpg" alt="Ana." title="Ana." class="elemento_derecha" width="200" height="134">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Ana ha recibido el encargo de que introduzca una serie de datos en las tablas de la base de datos para poder realizar varias pruebas de su funcionamiento. No son muchos registros los que tiene que introducir, así que va a utilizar una herramienta gráfica que le ofrece el sistema gestor de base de datos que van a utilizar. Ella podría hacerlo escribiendo una serie de instrucciones que ha aprendido durante sus estudios, pero como no son muchos los registros que debe introducir, ha optado por utilizar la herramienta gráfica, ya que facilita el tratamiento de los datos para casos sencillos.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id4-2">
<div class="iDevice emphasis0">
<div id="ta4_73" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-gnu-gpl" style="width: 128px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R05_GRAF.png" alt="Ventana con engranaje en su interior." title="Herramientas gráficas." class="elemento_derecha" width="128" height="128" style="width: 128px; height: 128px;">
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/File:Crystal_Clear_app_winprops.png" target="_blank" class="author" title="Accede a la web de la imagen (se abre en una ventana nueva)" rel="noopener">Everaldo Coelho</a> <span class="license"><span class="sep">(</span><a href="http://www.gnu.org/licenses/gpl.html" target="_blank" title="Acceder a la web sobre la licencia (se abre en una ventana nueva)" rel="noopener">GNU/GPL</a><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Los sistemas gestores de bases de datos como el de Oracle, pueden ofrecer mecanismos para la manipulación de la información contenida en las bases de datos. Principalmente se dividen en herramientas gráficas y herramientas en modo texto (también reciben el nombre de terminal, consola o línea de comandos).</p>
<p>Para realizar el tratamiento de los datos por línea de comandos se requiere la utilización de un lenguaje de base de datos como SQL, lo cual implica el conocimiento de dicho lenguaje.</p>
<p>En cambio, si se dispone de herramientas gráficas para la manipulación de los datos, no es imprescindible conocer las sentencias de un lenguaje de ese tipo, y permite la introducción, edición y borrado de datos desde un entorno gráfico con la posibilidad de uso de ratón y una ventana que facilita esas operaciones con un uso similar a las aplicaciones informáticas a las que estamos acostumbrados como usuarios.</p>
<p>La base de datos Oracle ofrece en sus distribuciones&nbsp;<span lang="en">Oracle Database Express</span> la herramienta <span lang="en">Application Express que se descarga al instalar Oracle DB XE, excepto en la versión 18c que hay que instalarla a parte. Si tienes instalada una versión anterior a las 18c XE podrás&nbsp;</span>&nbsp;acceder en Windows desde Inicio &gt; Todos los programas &gt; Base de Datos <span lang="en">Oracle Express Edition</span> &gt; Ir a Página Inicial de Base de Datos.</p>
<p>Nosotros seguiremos trabajando con&nbsp; <strong>SQLDeveloper</strong>, la herramienta de Oracle más extendida, cuyo objetivo es proporcionar una interfaz más amigable para la consulta y programación de la base de datos Oracle. La funcionalidad disponible en SQLDeveloper es sólo parte de la disponible a través de comandos en SQL*Plus, pero se corresponde con las tareas más habituales de interacción, programación y depuración de código sobre la base de datos. Descárgate el manual que encontrarás en el apartado <em>Debes conocer</em>&nbsp;para aprender cómo realizar las operaciones más básicas.</p>
<p>En el SGBD Mysql podemos encontrar una herramienta similar, aunque menos potente: phpmyadmin.&nbsp;</p>
<div class="elemento_centrado">
<div class="elemento_centrado"></div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id59-2">
<div class="iDevice emphasis_debesconocerfpd">
<header class="iDevice_header" style="background-image:url(icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta59_129" class="block iDevice_content">
<p>En el siguiente enlace puedes acceder a un PDF de un manual breve y sencillo del uso básico de SQLDeveloper en español. Te será útil para el seguimiento de la unidad.</p>
<p style="text-align: center;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/ManualBrevesqldeveloper.pdf" target="_blank" title="Accede al PDF del manual  básico de SQLDeveloper en español [pdf - 1024,83 KB]" rel="noopener">Manual básico SQLDeveloper </a><span class="exe-link-data file-size"> (pdf - 1024,83 <abbr title="KiloBytes" lang="en">KB</abbr>)</span></p>
<p>Para obtener más información sobre SQLDeveloper puedes acceder a la web oficial. Agrégalo a marcadores para tenerlo a mano.</p>
<p style="text-align: center;"><a href="https://docs.oracle.com/cd/E55747_01/appdev.41/e55591/toc.htm" target="_blank" title="Acceso a manual en la web oficial de SQLDeveloper (se abre en una ventana nueva)" rel="noopener">Acceso a manual en la web oficial de SQLDeveloper</a></p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id5-2">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-5_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion5_60" class="block question iDevice_content">
<strong>La única manera de realizar el tratamiento de datos en una base de datos es a través de una herramienta gráfica. ¿Verdadero o Falso?</strong>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i5_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-5_63">Opción 1</a></label><input type="radio" name="option5_60" id="i5_63" class="exe-radio-option exe-radio-option-0-2-5_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-5_63"><div id="taans5_63" class="block iDevice_content">
Falso.

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i5_81" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-5_81">Opción 2</a></label><input type="radio" name="option5_60" id="i5_81" class="exe-radio-option exe-radio-option-1-2-5_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-5_81"><div id="taans5_81" class="block iDevice_content">
Verdadero.

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b5_60" class="feedback js-hidden">
<div id="taf5_63" class=" iDevice_content">
Efectivamente, se pueden encontrar otras herramientas en modo texto en las que la manipulación de los datos se hace a través de una serie de comandos.

</div>
</section>
<section id="sa1b5_60" class="feedback js-hidden">
<div id="taf5_81" class=" iDevice_content">
Incorrecto, vuelve a intentarlo, porque la respuesta que has dado no es correcta.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-5_63">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b5_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-5_81">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b5_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-3">
<header class="nodeDecoration">
<h1 id="exenode_3_21Insercinderegistros" class="nodeTitle">2.1.- Inserción de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id6-3">
<div class="iDevice emphasis0">
<div id="ta6_73" class="block iDevice_content">
<p>La inserción de registros o filas&nbsp; permite introducir nuevos datos en las tablas que componen la base de datos. En el <a href="http://localhost:51237/BD05_Contenidos/resources/ManualBrevesqldeveloper.pdf" onclick="browseURL(&#39;http://localhost:51237/BD05_Contenidos/resources/ManualBrevesqldeveloper.pdf&#39;,this); return false" target="_blank" title="Accede al PDF del manual  básico de SQLDeveloper en español [pdf - 1024,83 KB]" rel="noopener">Manual básico SQLDeveloper</a>, de la unidad anterior,&nbsp; tienes explicados los pasos para insertar filas utilizando el interface gráfico. Tan sencillo como seleccionar la tabla, pulsar la pestaña Datos y el botón de Insertar <img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonInsertarFila.JPG" alt="Imagen de Botón Insertar Fila en SQLDeveloper identificado por una hoja de papel y sobre é el símbolo + en verde" title="Imagen de Botón Insertar Fila" width="33" height="38" style="vertical-align: middle;">.</p>
<p>Ya puedes introducir datos.</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 741px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_2_1.JPG" alt="Captura de pantalla de la inserción de  filas utilizando el interface gráfico de SQLDeveloper" title="Captura de pantalla de la inserción de  filas utilizando el interface gráfico de SQLDeveloper" width="741" height="317" style="vertical-align: middle;">
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Para finalizar, cuando hayas insertado todas las filas, confirma la operación con el botón correspondiente&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonConfirmar.JPG" alt="Botón de confirmación de transacción en SQLDeveloper. Se muestra el símbolo de verificación verde sobre la representación del símbolo de la BD" title="Botón de confirmación de transacción " width="27" height="26" style="vertical-align: middle;">&nbsp;. Se visualizará un mensaje en la parte inferior de la pantalla indicando <em>Confirmación Correcta</em> si las filas se han insertado de forma correcta.</p>
<ol></ol>
<p>En caso de que se haya producido un <strong>error</strong> al intentar insertar los datos, habrá que comprobar el mensaje que se muestra, e intentar solucionar el problema. Por ejemplo, si se intenta introducir un texto en un campo de tipo numérico se obtendrá un error como el siguiente: "<em>error ORA-00984: columna no permitida aquí</em>", y no se habrá realizado ninguna operación de la inserción del nuevo registro.</p>
</div>
</div>
</article>
<article class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice" id="id60-3">
<div class="iDevice emphasis_debesconocerfpd">
<header class="iDevice_header" style="background-image:url(icon_debesconocerfpd.png)"><h2 class="iDeviceTitle">Debes conocer</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta60_129" class="block iDevice_content">
<p>Para deshacer una operación de inserción, modificación o borrado de filas&nbsp; que aún no ha sido confirmada utiliza el botón de Rollback&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonRollback.JPG" alt="Imagen botón Rollback de SQLDeveloper, es similar al de confirmación erp tiene una marca roja." title="Imagen botón Rollback " width="30" height="24" style="vertical-align: middle;">&nbsp;situado al lado del botón de confirmación. Ten en cuenta que si ya has confirmado los cambios no podrás deshacerlos. Tampoco podrás deshacerlos si has realizado una operación DDL, ya que éstas confirman de forma automática.</p>
</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-4">
<header class="nodeDecoration">
<h1 id="exenode_4_22Modificacinderegistros" class="nodeTitle">2.2.- Modificación de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id8-4">
<div class="iDevice emphasis0">
<div id="ta8_73" class="block iDevice_content">
<p>Para modificar los datos de alguna fila, selecciona la tabla, pulsa la pestaña Datos y sitúate directamente en la columna de la fila que quieras modificar, haz clic con el ratón y escribe el nuevo contenido.&nbsp;</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 695px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_2_2.JPG" alt="Captura de pantalla de la modificación de  filas utilizando el interface gráfico de SQLDeveloper" title="Modificación filas modo gráfico con SQLDeveloper" width="695" height="271" style="vertical-align: middle;">
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web de Oracle Corporation (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p>Si cambias a otra fila el contenido modificado se mantiene en pantalla. Otra forma de hacerlo es pulsar&nbsp;el botón&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonModificarconVentanaFila.JPG" alt="Imagen de Botón Modificar a través de una ventana." title="Botón Modificar a través de ventana" width="25" height="19" style="vertical-align: middle;">&nbsp;que aparece a continuación de la columna: se abrirá una nueva ventana para que introduzcas el nuevo valor.</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 200px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_2_2a.JPG" rel="lightbox" title="Ventana Modificación"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_2_2a.JPG" alt="Ventana modificación datos columna SQLDeveloper" title="Ventana modificación datos. Pulsar para ampliar" width="200" height="170" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web de Oracle Corporation (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p>Para finalizar, cuando hayas realizado todas las modificaciones, confirma la operación con el botón correspondiente&nbsp;<img src="http://localhost:51237/BD05_Contenidos/resources/BD05_CONT_BotonConfirmar.JPG" alt="Botón de confirmación de transacción en SQLDeveloper. Se muestra el símbolo de verificación verde sobre la representación del símbolo de la BD" title="Botón de confirmación de transacción " width="27" height="26" style="vertical-align: middle;">&nbsp;. Se visualizará un mensaje en la parte inferior de la pantalla indicando<span>&nbsp;</span><em>Confirmación Correcta</em><span>&nbsp;</span>si las filas se han modificado&nbsp; de forma correcta.</p>
<ol></ol>
<p>Al igual que se comentó en la inserción de registros, al aceptar los cambios realizados en los datos, éstos se comprobarán automáticamente para ver si cumplen con los requisitos establecidos en la tabla. En caso de que no se cumplan, aparecerá un mensaje informando del error que se ha producido. Una vez solucionado el problema se podrá volver a intentar aplicar los cambios efectuados confirmando la operación.</p>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-5">
<header class="nodeDecoration">
<h1 id="exenode_5_23Borradoderegistros" class="nodeTitle">2.3.- Borrado de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id10-5">
<div class="iDevice emphasis0">
<div id="ta10_73" class="block iDevice_content">
<p>En el caso de que quieras eliminar un registro o fila de una determinada tabla&nbsp;elige la pestaña Datos y sitúate en la fila que quieras eliminar (da igual que te sitúes en el número de la fila o en cualquier columna, el resultado será el mismo). Pulsa el botón&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonEliminarFila.JPG" alt="Botón eliminar fila SQLDeveloper identificado por una X en rojo" title="Botón eliminar fila SQLDeveloper" width="24" height="23" style="vertical-align: middle;">&nbsp;para cada una de las filas que quieras eliminar. Al hacerlo marcará el borde la fila en rojo y colocará&nbsp; el signo - delante del número de cada fila. En la imagen inferior se han borrado las filas 2 y 3, aunque aún necesitaremos confirmar la operación para que se apliquen los cambios.</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 699px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_2_3.JPG" alt="Captura de pantalla de filas seleccionadas para ser eliminadas en SQLDeveloper" title="Eliminar filas en SQLDeveloper" width="699" height="298" style="vertical-align: middle;">
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p>Para que los cambios se apliquen y se realice el borrado efectivo de las filas, al igual que en las operaciones de inserción y modificación que debes confirmar con el botón&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonConfirmar.JPG" alt="Botón Confirmar SQLDeveloper" title="Botón Confirmar" width="27" height="26" style="vertical-align: middle;">. Recuerda que puedes deshacer los borrados, antes de confirmar, con el botón&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonRollback.JPG" alt="Botón deshacer o rollback SQLDeveloper" title="Botón deshacer o rollback " width="25" height="20" style="vertical-align: middle;">.</p>
<p>En cualquiera de los dos casos se visualizará en la parte inferior de la pantalla y el proceso se ha realizado de forma correcta.</p>
<p>La eliminación de un registro no podrá realizarse si un registro de otra tabla hace referencia a él. En ese caso, se mostrará el mensaje correspondiente al intentar eliminarlo (similar a: "<em>error ORA-02292: restricción de integridad violada - registro secundario encontrado</em>"). Si ocurriera esto, para eliminar el registro se debe eliminar el registro que hace referencia a él, o bien modificarlo para que haga referencia a otro registro.</p>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-6">
<header class="nodeDecoration">
<h1 id="exenode_6_3EdicindelainformacinmediantesentenciasSQL" class="nodeTitle">3.- Edición de la información mediante sentencias SQL.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id13-6">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta13_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_04.jpg" alt="Juan." title="Juan." class="elemento_derecha" width="200" height="134">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>La aplicación web de juegos <span lang="en">online</span> que está desarrollando Juan, debe acceder a la base de datos desde su código fuente para recoger datos almacenados en ella. La herramienta gráfica que ha estado utilizando Ana para introducir datos no puede usarse para que la aplicación que está desarrollando realice esa misma operación. Tendrá que utilizar, desde el código fuente de la aplicación, sentencias del lenguaje SQL que permiten la manipulación de los datos. Por ello, va a practicar con Ana el uso de esas sentencias SQL desde la aplicación&nbsp; SQLDeveloper, para más adelante implementarlas en el código fuente de la aplicación.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id14-6">
<div class="iDevice emphasis0">
<div id="ta14_73" class="block iDevice_content">
<p>El lenguaje SQL dispone de una serie de sentencias para la edición (inserción, actualización y borrado) de los datos almacenados en una base de datos. Ese conjunto de sentencias recibe el nombre de <span lang="en"><em>Data Manipulation Language</em></span> (<acronym title=" Data Manipulation Language. Lenguaje de Manipulación de Datos.">DML</acronym>).</p>
<p>Como ya sabemos las sentencias SQL pueden ser ejecutadas desde la línea de comandos de SQLPlus o escribiéndolas en la Hoja de trabajo de SQLDeveloper.</p>
<p>Para trabajar con&nbsp; SQLDeveloper utiliza&nbsp; el botón&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonSQL.JPG" alt="Botón SQL para introducir comandos SQL en SQLDeveloper" title="Botón SQL para introducir comandos SQLDeveloper" width="44" height="30" style="vertical-align: middle;">&nbsp;. Solicitará la conexión con la que queremos trabajar pudiendo seleccionarla desde la lista desplegable asociada. Una vez elegida se abrirá en la pantalla la Hoja de trabajo desde donde podremos introducir las sentencias SQL. Para ejecutar la sentencias SQL activa utiliza el botón&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonEjecutarSQL.JPG" alt="Botón Ejecutar SQL activa identificado por una flecha verde" title="Botón Ejecutar SQL" width="24" height="28" style="vertical-align: middle;">&nbsp;situado en la parte superior de la pantalla. Si quieres ejecutar otras sentencias SQL, que se encuentren en la Hoja de trabajo, selecciónalas antes pulsar el botón de ejecución.</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 659px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_3.JPG" alt="Hoja de trabajo de SQLDeveloper con la sentencia SELECT * FROM ESTUDIOS;  y las filas devueltas en la parte inferior de la pantalla." title="Hoja de trabajo de SQLDeveloper " width="659" height="398" style="vertical-align: middle;">
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web de Oracle Corporation (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p>El resultado de la operación, consulta en caso de SELECT,&nbsp; o estado, en caso de otras operaciones, se mostrará en la parte inferior de la pantalla.</p>
<p>Entre las muchas opciones interesantes de SQLDeveloper, tienes la posibilidad de acceder a todas las sentencias SQL que has escrito, aunque no las hayas guardado, con el botón&nbsp;&nbsp;<img src="./BD05 - Tratamiento de datos_files/BD05_CONT_BotonHistorialSQL.JPG" alt="Botón Historial SQL de SQLDeveloper representado como un reloj sobre una hoja" title="Botón Historial SQL de SQLDeveloper " width="23" height="28" style="vertical-align: middle;">&nbsp;situado en la parte superior.</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 600px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_3Historial.JPG" rel="lightbox" title="Historial SQL"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_3Historial.JPG" alt="Ejecución Historial SQL muestra las ultimas sentencias SQL introducidas" title="Historial SQL. Pulsar para ampliar" width="600" height="346" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-7">
<header class="nodeDecoration">
<h1 id="exenode_7_31Insercinderegistros" class="nodeTitle">3.1.- Inserción de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id15-7">
<div class="iDevice emphasis0">
<div id="ta15_73" class="block iDevice_content">
<p>La sentencia <code><em>INSERT</em></code> permite la inserción de nuevas filas o registros en un tabla existente.</p>
<p>El formato más sencillo de utilización de la sentencia <code><em>INSERT</em></code> tiene la siguiente sintaxis:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> nombre_tabla <span class="token punctuation">(</span>lista_campos<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>lista_valores<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Donde <em>nombre_tabla</em> será el nombre de la tabla en la que quieras añadir nuevos registros. En lista_campos se indicarán los campos de dicha tabla en los que se desea escribir los nuevos valores indicados en <em>lista_valores</em>. Es posible omitir la lista de campos (<em>lista_campos</em>), si se indican todos los valores de cada campo y en el orden en el que se encuentran en la tabla.</p>
<p>Tanto la lista de campos <em>lista_campos</em> como la de valores <em>lista_valores</em>, tendrán separados por comas cada uno de sus elementos. Hay que tener en cuenta también que cada campo de <em>lista_campos</em> debe tener un valor válido en la posición correspondiente de la <em>lista_valores</em> (Si no recuerdas los valores válidos para cada campo puedes utilizar la sentencia <code><em>DESCRIBE</em></code> seguida del nombre de la tabla que deseas consultar).</p>
<p>Para poder probar los ejemplos debes tener creadas y cargadas las tablas de<code> JuegosOnline</code> en el usuario <code>c##juegos</code> o similar. Si no lo has hecho en la unidad anterior, descárgate el script de este<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/CreayCargaJuegosOnline.zip" title="Accede a ZIP con  script de creación de usuario, tablas y carga de datos de Juegos oniline"> enlace, </a>conecta con <code>sys as sysdba</code> y a continuación ejecútalo. Recuerda que si lo haces desde sqlplus solo tienes que escribir la ruta y el nombre del script precedido del símbolo @ o bien de la palabra start.&nbsp;&nbsp;</p>
<p>Antes de ejecutar el siguiente ejemplo que&nbsp;inserta un nuevo registro en la tabla <code><em>USUARIOS</em></code> en el que se tienen todos los datos disponibles debes ejecutar la sentencia</p>
<p><code>&nbsp;ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';</code></p>
<p>para que tome la fecha en ese formato en el que le estamos dando el dato fecha.</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> USUARIOS <span class="token punctuation">(</span>Login<span class="token punctuation">,</span> Password<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Apellidos<span class="token punctuation">,</span> Direccion<span class="token punctuation">,</span> CP<span class="token punctuation">,</span> Localidad<span class="token punctuation">,</span> Provincia<span class="token punctuation">,</span> Pais<span class="token punctuation">,</span> F_Nac<span class="token punctuation">,</span>
F_Ing<span class="token punctuation">,</span> Correo<span class="token punctuation">,</span> Credito<span class="token punctuation">,</span> Sexo<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'migrod86'</span><span class="token punctuation">,</span> <span class="token string">'6PX5=V'</span><span class="token punctuation">,</span> <span class="token string">'MIGUEL ANGEL'</span><span class="token punctuation">,</span> <span class="token string">'RODRIGUEZ RODRIGUEZ'</span><span class="token punctuation">,</span> <span class="token string">'ARCO DEL LADRILLO,PASEO'</span><span class="token punctuation">,</span> 
<span class="token string">'47001'</span><span class="token punctuation">,</span> <span class="token string">'VALLADOLID'</span><span class="token punctuation">,</span> <span class="token string">'VALLADOLID'</span><span class="token punctuation">,</span> <span class="token string">'ESPAÑA'</span><span class="token punctuation">,</span> <span class="token string">'27/04/1977'</span><span class="token punctuation">,</span> <span class="token string">'10/01/2008'</span><span class="token punctuation">,</span> <span class="token string">'migrod86@gmail.com'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<p><span style="font-size: 1em;">En este otro ejemplo, se inserta un registro de igual manera, pero sin disponer de todos los datos:</span></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> USUARIOS <span class="token punctuation">(</span>Login<span class="token punctuation">,</span> Password<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Apellidos<span class="token punctuation">,</span> direccion<span class="token punctuation">,</span>cp<span class="token punctuation">,</span>localidad<span class="token punctuation">,</span>provincia<span class="token punctuation">,</span>pais<span class="token punctuation">,</span>Correo<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'natsan63'</span><span class="token punctuation">,</span> 
<span class="token string">'VBROMI'</span><span class="token punctuation">,</span> <span class="token string">'NATALIA'</span><span class="token punctuation">,</span> <span class="token string">'SANCHEZ GARCIA'</span><span class="token punctuation">,</span><span class="token string">'C/Blanca'</span><span class="token punctuation">,</span><span class="token string">'28003'</span><span class="token punctuation">,</span><span class="token string">'Madrid'</span><span class="token punctuation">,</span><span class="token string">'Madrid'</span><span class="token punctuation">,</span><span class="token string">'Spain'</span><span class="token punctuation">,</span> <span class="token string">'natsan63@hotmail.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
<p>Al hacer un <code><em>INSERT</em></code> en el que no se especifiquen los valores de todos los campos, se obtendrá el valor <code><em>NULL</em></code> en aquellos campos que no se han indicado.</p>
<p>Si la lista de campos indicados no se corresponde con la lista de valores, o si no se proporcionan valores para campos que no admiten el valor <code>NULL</code>, se obtendrá un error en la ejecución. Por ejemplo, si no se indica el campo Apellidos pero sí se especifica un valor para dicho campo:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> USUARIOS <span class="token punctuation">(</span>Login<span class="token punctuation">,</span> Password<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Correo<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'caysan56'</span><span class="token punctuation">,</span> <span class="token string">'W4IN5U'</span><span class="token punctuation">,</span> <span class="token string">'CAYETANO'</span><span class="token punctuation">,</span> <span class="token string">'SANCHEZ CIRIZA'</span><span class="token punctuation">,</span> <span class="token string">'caysan56@gmail.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Se obtiene el siguiente error:</p>
<div>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql">ORA<span class="token number">-00913</span>: demasiados valores</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id16-7">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-16_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion16_60" class="block question iDevice_content">
<strong>¿Cuál de las siguientes sentencias INSERT es correcta?</strong> 

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i16_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_63">Opción 1</a></label><input type="radio" name="option16_60" id="i16_63" class="exe-radio-option exe-radio-option-0-4-16_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-16_63"><div id="taans16_63" class="block iDevice_content">
<code>INSERT INTO PRODUCTOS (Codigo, Nombre, Existencias) VALUES (3, Leche, 100);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i16_115" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_115">Opción 2</a></label><input type="radio" name="option16_60" id="i16_115" class="exe-radio-option exe-radio-option-1-4-16_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-16_115"><div id="taans16_115" class="block iDevice_content">
<code>INSERT INTO PRODUCTOS (3, 'Leche', 100);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i16_118" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_118">Opción 3</a></label><input type="radio" name="option16_60" id="i16_118" class="exe-radio-option exe-radio-option-2-4-16_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-16_118"><div id="taans16_118" class="block iDevice_content">
<code>INSERT INTO PRODUCTOS (Codigo, Nombre, Existencias) VALUES (3, 'Leche', 100);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i16_121" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_121">Opción 4</a></label><input type="radio" name="option16_60" id="i16_121" class="exe-radio-option exe-radio-option-3-4-16_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-16_121"><div id="taans16_121" class="block iDevice_content">
<code>INSERT INTO PRODUCTOS (Codigo, Nombre, Existencias) VALUES ('Leche', 3, 100);</code>

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b16_60" class="feedback js-hidden">
<div id="taf16_63" class=" iDevice_content">
Incorrecto, el nombre del producto es un texto y debe ir entre comillas simples.

</div>
</section>
<section id="sa1b16_60" class="feedback js-hidden">
<div id="taf16_115" class=" iDevice_content">
No es correcto, aunque se puede omitir la lista de campos, hay que indicar VALUES.

</div>
</section>
<section id="sa2b16_60" class="feedback js-hidden">
<div id="taf16_118" class=" iDevice_content">
Correcto, esta sentencia se puede ejecutar correctamente.

</div>
</section>
<section id="sa3b16_60" class="feedback js-hidden">
<div id="taf16_121" class=" iDevice_content">
No es cierto, el orden de los valores no coincide con el de los nombre de los campos.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_63">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b16_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_115">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b16_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_118">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa2b16_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-16_121">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa3b16_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-8">
<header class="nodeDecoration">
<h1 id="exenode_8_32Modificacinderegistros" class="nodeTitle">3.2.- Modificación de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id17-8">
<div class="iDevice emphasis0">
<div id="ta17_73" class="block iDevice_content">
<p>La sentencia <code><em>UPDATE</em></code> permite modificar una serie de valores de determinados registros de las tablas de la base de datos.</p>
<p>La manera más sencilla de utilizar la sentencia <code><em>UPDATE</em></code> tiene la siguiente sintaxis:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">UPDATE</span> nombre_tabla <span class="token keyword">SET</span> nombre_campo <span class="token operator">=</span> valor <span class="token punctuation">[</span><span class="token punctuation">,</span> nombre_ campo <span class="token operator">=</span> valor<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span> <span class="token keyword">WHERE</span> condición <span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Donde <em>nombre_tabla</em> será el nombre de la tabla en la que quieras modificar datos. Se pueden especificar los nombres de campos que se deseen de la tabla indicada. A cada campo especificado se le debe asociar el nuevo valor utilizando el signo =. Cada emparejamiento <em>campo=valor</em> debe separarse del siguiente utilizando comas (,).</p>
<p>La cláusula <code><em>WHERE</em></code> seguida de la condición es opcional (como pretenden indicar los corchetes). Si se indica, la actualización de los datos sólo afectará a los registros que cumplen la condición. Por tanto, ten en cuenta que si no indicas la cláusula <code><em>WHERE</em></code>, los cambios afectarán a todos los registros.</p>
<p>Por ejemplo, si se desea poner a 200 el crédito de todos los usuarios:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">UPDATE</span> USUARIOS <span class="token keyword">SET</span> Credito <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>En este otro ejemplo puedes ver la actualización de dos campos, poniendo a 0 el crédito y poniendo a Nulos la información del campo <em>f_nac</em> de todos los usuarios:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">UPDATE</span> USUARIOS <span class="token keyword">SET</span> Credito <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> f_nac <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Para que los cambios afecten a determinados registros hay que especificar una condición. Por ejemplo, si se quiere cambiar el crédito de todas la mujeres, estableciendo el valor 300:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">UPDATE</span> USUARIOS <span class="token keyword">SET</span> Credito <span class="token operator">=</span> <span class="token number">300</span> <span class="token keyword">WHERE</span> Sexo <span class="token operator">=</span> <span class="token string">'M'</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Cuando termina la ejecución de una sentencia <code><em>UPDATE</em></code>, se muestra la cantidad de registros (filas) que han sido actualizadas, o el error correspondiente si se ha producido algún problema. Por ejemplo podríamos encontrarnos con un mensaje similar al siguiente:</p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token number">9</span> fila<span class="token punctuation">(</span>s<span class="token punctuation">)</span> actualizada<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre>
</div>
</div>
<p>También podemos escribir la sentencia en la hoja de trabajo de SQLDeveloper. Por ejemplo incrementar en 10 el credito de las mujeres</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 652px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_3_2.JPG" alt="Sentencia update usuarios set credito=credito+10 where sexo=&#39;M&#39;; y ejecución en SQLDeveloper" title="Sentencia update en SQLDeveloper" width="652" height="347">
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Acceder a web de Oracle Corporation (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span></span><span style="font-family: &#39;DejaVu Sans Mono&#39;; font-size: 12px; background-color: #333029; text-align: justify;"></span></figcaption>
</figure>
<div>
<pre></pre>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-9">
<header class="nodeDecoration">
<h1 id="exenode_9_33Borradoderegistros" class="nodeTitle">3.3.- Borrado de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id19-9">
<div class="iDevice emphasis0">
<div id="ta19_73" class="block iDevice_content">
<p>La sentencia <code><em>DELETE</em></code> es la que permite eliminar o borrar registros de un tabla.</p>
<p>Esta es la sintaxis que debes tener en cuenta para utilizarla:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> nombre_tabla <span class="token punctuation">[</span> <span class="token keyword">WHERE</span> condición <span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Al igual que hemos visto en las sentencias anteriores, nombre_tabla hace referencia a la tabla sobre la que se hará la operación, en este caso de borrado. Se puede observar que la cláusula <code><em>WHERE</em></code> es opcional. Si no se indica, debes tener muy claro que se borrará todo el contenido de la tabla, aunque la tabla seguirá existiendo con la estructura que tenía hasta el momento. Por ejemplo, si usas la siguiente sentencia, borrarás todos los registros de la tabla <code><em>USUARIOS</em>:</code></p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> USUARIOS<span class="token punctuation">;</span>
</code></pre>
</div>
</div>
<p>Es tan importante escribir la cláusula&nbsp;<code> WHERE</code> en la sentencia,&nbsp; si no quieres borrar la tabla entera, que incluso hay una canción que lo recuerda.. Puedes verla en este <a href="https://www.youtube.com/watch?v=i_cVJgIz_Cs" target="_blank" title="Accede a video de youtube &quot;No te olvides de poner el where en el delete from&quot; (accede a nueva ventana)" rel="noopener">enlace</a>.</p>
</div>
<p>Para ver un ejemplo de uso de la sentencia <code><em>DELETE</em></code> en la que se indique una condición, supongamos que queremos eliminar todos los usuarios cuyo crédito es cero:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> USUARIOS <span class="token keyword">WHERE</span> Credito <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Como resultado de la ejecución de este tipo de sentencia, se obtendrá un mensaje de error si se ha producido algún problema, o bien, el número de filas que se han eliminado.</p>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id20-9">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-20_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion20_60" class="block question iDevice_content">
<strong>¿Si no se especifica una condición en la sentencia <code>DELETE</code> se borra todo el contenido de la tabla especificada?</strong>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i20_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-20_63">Opción 1</a></label><input type="radio" name="option20_60" id="i20_63" class="exe-radio-option exe-radio-option-0-2-20_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-20_63"><div id="taans20_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i20_126" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-20_126">Opción 2</a></label><input type="radio" name="option20_60" id="i20_126" class="exe-radio-option exe-radio-option-1-2-20_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-20_126"><div id="taans20_126" class="block iDevice_content">
Falso.

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b20_60" class="feedback js-hidden">
<div id="taf20_63" class=" iDevice_content">
Correcto, debes tener cuidado al usar la sentencia <code>DELETE</code>, porque si no se especifica qué datos se desea eliminar de la tabla, se eliminará todo su contenido.

</div>
</section>
<section id="sa1b20_60" class="feedback js-hidden">
<div id="taf20_126" class=" iDevice_content">
Vuelve a intentarlo, porque la respuesta que has dado no es correcta.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-20_63">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b20_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-20_126">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b20_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-10">
<header class="nodeDecoration">
<h1 id="exenode_10_4Integridadreferencial" class="nodeTitle">4.- Integridad referencial.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id21-10">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta21_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_03.jpg" alt="Ana." title="Ana." class="elemento_derecha" width="200" height="134">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder a la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación </a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Ana tiene una duda en el planteamiento de la base de datos del proyecto de la plataforma de juegos <span lang="en">online</span> y se la plantea a Juan: ¿Qué ocurre si el registro correspondiente a los datos de un determinado juego es eliminado y existen partidas creadas de dicho juego? Juan le responde que para eso existe la <a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#tc421d98b-b99a-b416-f51d-3a92da0e5407" id="linkc421d98b-b99a-b416-f51d-3a92da0e5407" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="1" oldtitle="Integridad referencial | " title="">integridad referencial</a>, que además asegurará otras cosas como por ejemplo que no puedan existir partidas que reflejen que su creador es un usuario que no existe en la base de datos.</p>
<div id="tc421d98b-b99a-b416-f51d-3a92da0e5407" class="exe-tooltip-text">
<p>Garantiza que una entidad (fila o registro) siempre se relaciona con otras entidades válidas, es decir, que existen en la base de datos. Implica que en todo momento dichos datos sean correctos, sin repeticiones innecesarias, datos perdidos y relaciones mal resueltas. Dicho de otro modo, todo valor de clave ajena se corresponde con una valor de clave primaria en otra tabla o es Nula.</p>
</div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id22-10">
<div class="iDevice emphasis0">
<div id="ta22_73" class="block iDevice_content">
<p>Dos tablas pueden ser relacionadas entre ellas si tienen en común uno o más campos, que reciben el nombre de <a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#tebea9844-b31a-cac8-8ef0-c03b22d799f0" id="linkebea9844-b31a-cac8-8ef0-c03b22d799f0" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="2" oldtitle="Clave ajena | " title="">clave ajena</a>. La restricción de integridad referencial requiere que haya coincidencia en todos los valores que deben tener en común ambas tablas. Cada valor del campo que forma parte de la integridad referencial definida, debe corresponderse, en la otra tabla, con otro registro que contenga el mismo valor en el campo referenciado.</p>
<p>Siguiendo con el ejemplo de juegos <span lang="en">online</span>, supongamos que en una determinada partida de un juego, se han unido una serie de usuarios. En la tabla de<code> <em>PARTIDAS</em> </code>existe un campo de referencia al tipo de juego al que corresponde, mediante su código de juego. Por tanto, no puede existir ninguna partida cuyo código de juego no se corresponda con ninguno de los juegos de la tabla <code><em>JUEGOS</em></code>.</p>
<div class="elemento_centrado">
<div class="elemento_centrado">
<figure class="exe-figure exe-image position-center license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R26_INT_REF.png" title="Integridad Referencial" rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R26_INT_REF_miniatura.png" alt="Dos tablas unidas por flechas." title="Ejemplo Integridad Referencial. Pulsar para ampliar" class="imagen_ampliable" width="200" height="71" style="width: 200px; height: 71px; vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" rel="noopener">Ministerio de Educación y FP</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>En este ejemplo, no se cumple la integridad referencial, porque la partida <code>"<em>PARTIDA03</em></code>" corresponde al juego cuyo código es 4, y en la tabla <code><em>JUEGOS</em></code> no existe ningún registro con ese código.</p>
<p>Para que se cumpla la integridad referencial, todos los valores del campo <code><em>Cod_Juego</em></code>&nbsp;de la tabla<code> PARTIDAS</code> deben corresponderse con valores existentes en el campo<code> <em>Codigo</em></code> de la tabla <code><em>JUEGOS</em>.</code></p>
<p>Cuando se habla de integridad referencial se utilizan los siguientes términos:</p>
<ul class="lista_verificacion">
<li><strong>Clave ajena</strong>: También llamada clave foránea, es el campo o conjunto de campos incluidos en la definición de la restricción que deben hacer referencia a una clave de referencia. En el ejemplo anterior, la clave ajena sería el campo <code><em>Cod_Juego</em></code> de la tabla <code><em>PARTIDAS</em></code>.</li>
<li><strong>Clave de referencia</strong>: Clave única o primaria de la tabla a la que se hace referencia desde una clave ajena. En el ejemplo, la clave de referencia es el campo <code><em>Codigo</em></code> de la tabla&nbsp;&nbsp;<code><em>JUEGOS</em></code>.</li>
<li><strong>Tabla hija o dependiente</strong>: Tabla que incluye la clave ajena, y que, por tanto, depende de los valores existentes en la clave de referencia. Correspondería a la tabla <code><em>PARTIDAS</em> </code>del ejemplo, que sería la tabla hija de la tabla <code><em>JUEGOS</em></code>.</li>
<li><strong>Tabla padre o de referencia</strong>: Corresponde a la tabla que es referenciada por la clave ajena en la tabla hija. Esta tabla determina las inserciones o actualizaciones que son permitidas en la tabla hija, en función de dicha clave. En el ejemplo, la tabla <code><em>JUEGOS</em></code> es padre de la tabla <code><em>PARTIDAS</em></code>.</li>
</ul>
<div id="tebea9844-b31a-cac8-8ef0-c03b22d799f0" class="exe-tooltip-text">
<p>Columna que existiendo como dependiente en una tabla, es a su vez clave primaria en otra tabla</p>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id23-10">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta23_47" class="block iDevice_content">
<p>
Descripción del concepto de integridad referencial con ejemplo.
</p>
<p class="enlace_centrado">
<a href="http://es.wikipedia.org/wiki/Integridad_referencial" title="Acceder al artículo sobre Integridad Referencial en Wikipedia." target="_self">Integridad Referencial.</a>
</p>

</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-11">
<header class="nodeDecoration">
<h1 id="exenode_11_41Integridadenactualizacinysupresinderegistros" class="nodeTitle">4.1.- Integridad en actualización y supresión de registros.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id24-11">
<div class="iDevice emphasis0">
<div id="ta24_73" class="block iDevice_content">
<p>La relación existente entre la clave ajena y la clave padre tiene implicaciones en el borrado y modificación de sus valores.</p>
<p>Si se modifica el valor de la clave ajena en la tabla hija, debe establecerse un nuevo valor que haga referencia a la clave principal de uno de los registros de la tabla padre. De la misma manera, no se puede modificar el valor de la clave principal en un registro de la tabla padre, y una clave ajena hace referencia a dicho registro.</p>
<p>Los borrados de registros en la tabla de referencia también puede suponer un problema, ya que no pueden suprimirse registros que son referenciados con una clave ajena desde otra tabla.</p>
<p>Suponiendo el siguiente ejemplo:</p>
<div class="elemento_centrado">
<div class="elemento_centrado">
<figure class="exe-figure exe-image position-center license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R27_INT_REF_2.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R27_INT_REF_2_miniatura.png" alt="Dos tablas unidas por flechas con operaciones." title="Ejemplo Integridad Referencial 2. Pulsar para ampliar" class="imagen_ampliable" width="200" height="50" style="width: 200px; height: 50px; vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder a la Web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación y FP</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p></p>
<p>En el registro de la partida con nombre <code>"<em>PARTIDA01</em></code>" no puede ser modificado el campo<code> <em>Cod_Juego</em></code> al valor 4, porque no es una clave ajena válida, puesto que no existe un registro en la tabla <code><em>JUEGOS</em> </code>con esa clave primaria.</p>
<p>El código del juego<code> "<em>DAMAS</em></code>" no puede ser cambiado, ya que hay registros en la tabla <code><em>PARTIDAS</em> </code>que hacen referencia a dicho juego a través del campo <code><em>Cod_Juego</em>.</code></p>
<p>Si se eliminara en la tabla<code> <em>JUEGOS</em></code> el registro que contiene el juego "<code><em>PARCHIS</em>"</code>, la partida "<code><em>PARTIDA05</em>"</code> quedaría con un valor inválido en el campo<code> <em>Cod_Juego</em>.</code></p>
<p>Cuando se hace el borrado o modificación de registros en una tabla de referencia, se puede configurar la clave ajena de diversas maneras para que se conserve la integridad referencial:</p>
<ul class="lista_verificacion">
<li><strong>No Permitir Supresión ni modificación</strong>: Es la opción por defecto. En caso de que se intente borrar o modificar en la tabla de referencia un registro que está siendo referenciado desde otra tabla, se produce un error en la operación de borrado impidiendo dicha acción.</li>
<li><strong><strong>Supresión o modificación en Cascada (<code>ON DELETE CASCADE</code></strong></strong><strong>)</strong>: Al suprimir o modificar registros de la tabla de referencia, los registros de la tabla hija que hacían referencia a dichos registros, también son borrados o modificados.</li>
<li><strong><strong>Asignación de Nulo (<code>ON DELETE SET NULL</code></strong></strong><strong>)</strong>: Los valores de la clave ajena que hacían referencia a los registros que hayan sido borrados o modificados de la tabla de referencia, son cambiados al valor <code><em>NULL</em></code>.</li>
<li><strong><strong>Valor por defecto (<code>ON DELETE DEFAULT</code></strong></strong><strong>):</strong>&nbsp; Los valores de la clave ajena que hacían referencia a los registros que hayan sido borrados o modificados de la tabla de referencia, son cambiados al valor especificado por defecto.&nbsp;</li>
</ul>
<p>En el caso de las modificaciones se cambiaría <code>ON DELETE</code> por <code>ON UPDATE</code></p>
<p></p>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id25-11">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta25_47" class="block iDevice_content">
<p>Apuntes sobre integridad referencial en Oracle.</p>
<div style="text-align: center;"><a href="https://studylib.es/doc/223737/facultad-de-inform%C3%A1tica-%E2%80%93-universidad-polit%C3%A9cnica-de-vale..." title="Acceder a web con documento  de E. Sánchez y E. Tejadillos de la Facultad de Informática de la Universidad Politécnica de Valencia.(se abre en una nueva ventana)" target="_blank" rel="noopener"></a><a href="https://studylib.es/doc/223737/facultad-de-inform%C3%A1tica-%E2%80%93-universidad-polit%C3%A9cnica-de-vale..." title="Acceder a web con documento  de E. Sánchez y E. Tejadillos de la Facultad de Informática de la Universidad Politécnica de Valencia.(se abre en una nueva ventana)" target="_blank" rel="noopener">Las Restricciones de Integridad en ORACLE</a><a href="https://studylib.es/doc/223737/facultad-de-inform%C3%A1tica-%E2%80%93-universidad-polit%C3%A9cnica-de-vale..." title="Acceder a web con documento  de E. Sánchez y E. Tejadillos de la Facultad de Informática de la Universidad Politécnica de Valencia.(se abre en una nueva ventana)" target="_blank" rel="noopener">.</a>&nbsp;</div>
</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-12">
<header class="nodeDecoration">
<h1 id="exenode_12_42Supresinencascada" class="nodeTitle">4.2.- Supresión en cascada.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id26-12">
<div class="iDevice emphasis0">
<div id="ta26_73" class="block iDevice_content">
<p>Las opciones de <em>Supresión en Cascada o Definir Nulo en Suprimir</em> pueden establecerse desde el momento de creación de las tablas. Desde SQLDeveloper marcamos la casilla Avanzado, nos situamos en la columna que es clave ajena&nbsp; y seleccionamos en el árbol Restricciones. En la lista desplegable del botón Añadir seleccionamos&nbsp; <em>Nueva Clave Ajena Restricción</em>&nbsp;como se muestra en la imagen.&nbsp;</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 200px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_4_2b.JPG" rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_4_2b.JPG" alt="SQLDeveloper elección  Nueva clave ajena restricción" title="SQLDeveloper elección  Nueva clave ajena restricción. Pulsar para ampliar" width="200" height="87" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p>Y podremos elegir la opción en la lista desplegable del cuadro "Al suprimir" como se muestra en la siguiente imagen.</p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 200px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_4_2c.JPG" rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_4_2c.JPG" alt="Captura pantalla con lista desplegable opciones al suprimir en restricción  clave ajena" title="Opciones al suprimir restricción clave ajena. Pulsar para ampliar" width="200" height="154" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p>Si la tabla ya estaba creada, y posteriormente se desea establecer una restricción de clave ajena con una opción concreta&nbsp;se puede establecer desde la opción Editar tabla siguiendo los pasos similares a la definición en la creación de la nueva tabla, como se muestra en la imagen.&nbsp;</p>
<div class="elemento_centrado">
<div class="elemento_centrado"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R30_CASCADA3.png" title="Ampliar imagen."></a>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 200px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_4_2d.jpg" rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_4_2d.jpg" alt="Restricción clave ajena en Edita Tabla SQLdeveloper" title="Editar tabla. Restricción clave ajena. Pulsar para ampliar" width="200" height="134" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>Si estas operaciones se quieren realizar con código SQL, se dispone de las siguientes opciones durante la declaración de la clave ajena de la tabla: utilizar la opción <code><em>ON DELETE CASCADE</em></code> para hacer la supresión en cascada, o bien <code><em>ON DELETE SET NULL</em></code> si se prefiere definir nulo en suprimir. Por ejemplo:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">CONSTRAINT</span> JUEGOS_CON <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Cod_Juego<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> JUEGO <span class="token punctuation">(</span>Codigo<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Hay que recordar que una declaración de este tipo debe hacerse en el momento de crear la tabla (<code><em>CREATE TABLE</em></code>) o modificar su estructura (<code><em>ALTER TABLE</em></code>).</p>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-13">
<header class="nodeDecoration">
<h1 id="exenode_13_5Subconsultasycomposicionesenrdenesdeedicin" class="nodeTitle">5.- Subconsultas y composiciones en órdenes de edición.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id27-13">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta27_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_04.jpg" alt="Juan." title="Juan." class="elemento_derecha" width="200" height="134">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso Educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Juan necesita un mecanismo que permita actualizaciones en la base de datos de forma masiva con una serie de condiciones que afectan no sólo a la tabla sobre la que debe hacer los cambio en los datos. Por ejemplo, va a implementar, en la aplicación que está desarrollando, una opción para que los usuarios que han creado partidas obtengan algunos beneficios en los créditos que disponen.</p>
<p>Para conseguir esto no le sirven las sentencias SQL simples que has podido ver en apartados anteriores. Deberá utilizarlas en unión con consultas que determinen los registros que han de ser modificados.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id28-13">
<div class="iDevice emphasis0">
<div id="ta28_73" class="block iDevice_content">
<p>Anteriormente has podido conocer una serie de instrucciones del lenguaje SQL que han servido para realizar operaciones de inserción, modificación y eliminación de registros. Tal como las hemos analizado, esas operaciones se realizan con una sola tabla, pero vamos a ver que esas mismas sentencias pueden utilizarse de una forma más avanzada insertando consultas dentro de esas mismas operaciones de tratamiento de datos.</p>
<p>Por tanto, veremos que una tabla se puede ver afectada por los resultados de las operaciones en otras tablas, es decir, que con una misma instrucción se puede añadir más de un registro a una tabla, o bien actualizar o eliminar varios registros basados en otras consultas&nbsp;</p>
<p>Los valores que se añadan o se modifiquen podrán ser obtenidos&nbsp; como resultado de una consulta.</p>
<p>Además, las condiciones que hemos podido añadir hasta ahora a las sentencias, pueden ser también consultas, por lo que pueden establecerse condiciones bastante más complejas.</p>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id29-13">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta29_47" class="block iDevice_content">
<p>
En este manual pueden encontrar una sección sobre las funciones agregadas y subconsultas (módulo 3). También puedes ver ejemplos en la parte final.
</p>
<div class="enlace_centrado">
 <a class="documento" href="http://es.scribd.com/doc/56646934/SQL-BASICO-Material-de-Apoyo" title="Acceder a material de apoyo de SQL básico." target="_self"> Resumen de SQL con ejemplos, incluyendo material sobre subconsultas.</a>
</div>

</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-14">
<header class="nodeDecoration">
<h1 id="exenode_14_51Insercinderegistrosapartirdeunaconsulta" class="nodeTitle">5.1.- Inserción de registros a partir de una consulta.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id30-14">
<div class="iDevice emphasis0">
<div id="ta30_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R31_INSERT_SELECT.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R31_INSERT_SELECT_miniatura.png" alt="Diagrama con icono de base de datos, tablas y símbolo de inserción." title="Inserción con subconsulta. Pulsar para ampliar" class="imagen_ampliable" width="200" height="130" style="width: 200px; height: 130px;"></a>
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder a la Web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación.</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso Educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>Anteriormente hemos visto la posibilidad de insertar registros en una tabla a través de la sentencia <code><em>INSERT</em></code>, por ejemplo:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> USUARIOS <span class="token punctuation">(</span>Login<span class="token punctuation">,</span> Password<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Apellidos<span class="token punctuation">,</span> direccion<span class="token punctuation">,</span>cp<span class="token punctuation">,</span>localidad<span class="token punctuation">,</span>provincia<span class="token punctuation">,</span>pais<span class="token punctuation">,</span>Correo<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'natsan63'</span><span class="token punctuation">,</span> 
<span class="token string">'VBROMI'</span><span class="token punctuation">,</span> <span class="token string">'NATALIA'</span><span class="token punctuation">,</span> <span class="token string">'SANCHEZ GARCIA'</span><span class="token punctuation">,</span><span class="token string">'C/Blanca'</span><span class="token punctuation">,</span><span class="token string">'28003'</span><span class="token punctuation">,</span><span class="token string">'Madrid'</span><span class="token punctuation">,</span><span class="token string">'Madrid'</span><span class="token punctuation">,</span><span class="token string">'Spain'</span><span class="token punctuation">,</span> <span class="token string">'natsan63@hotmail.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>Esta misma acción se puede realizar usando una consulta <code><em>SELECT</em></code> dentro de la sentencia <code><em>INSERT</em></code>, así por ejemplo, la equivalente a la anterior sería:</p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Login<span class="token punctuation">,</span> Password<span class="token punctuation">,</span> Nombre<span class="token punctuation">,</span> Apellidos<span class="token punctuation">,</span> direccion<span class="token punctuation">,</span>cp<span class="token punctuation">,</span>localidad<span class="token punctuation">,</span>provincia<span class="token punctuation">,</span>pais<span class="token punctuation">,</span>Correo <span class="token keyword">FROM</span> USUARIOS<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'natsan63'</span><span class="token punctuation">,</span> 
<span class="token string">'VBROMI'</span><span class="token punctuation">,</span> <span class="token string">'NATALIA'</span><span class="token punctuation">,</span> <span class="token string">'SANCHEZ GARCIA'</span><span class="token punctuation">,</span><span class="token string">'C/Blanca'</span><span class="token punctuation">,</span><span class="token string">'28003'</span><span class="token punctuation">,</span><span class="token string">'Madrid'</span><span class="token punctuation">,</span><span class="token string">'Madrid'</span><span class="token punctuation">,</span><span class="token string">'Spain'</span><span class="token punctuation">,</span> <span class="token string">'natsan63@hotmail.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<p>Puedes observar que simplemente se ha sustituido el nombre de la tabla, junto con sus campos, por una consulta equivalente.</p>
<p>También&nbsp; es posible <strong>insertar en una tabla valores que se obtienen directamente del resultado de una consulta.</strong> Supongamos por ejemplo, que disponemos de una tabla <code><em>USUARIOS_SIN_CREDITO</em></code> con la misma estructura que la tabla<code> <em>USUARIOS&nbsp;</em></code>ya creada. Si queremos insertar en esa tabla todos los usuarios que tienen el crédito a cero:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> USUARIOS_SIN_CREDITO <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> USUARIOS <span class="token keyword">WHERE</span> Credito <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<p><span style="font-family: HelveticaNeue-Light, &#39;Helvetica Neue Light&#39;, &#39;Helvetica Neue&#39;, Helvetica, Arial, &#39;Lucida Grande&#39;, sans-serif; font-size: 1em;">Observa que en ese caso no se debe especificar la palabra </span><code><em>VALUES</em></code><span style="font-family: HelveticaNeue-Light, &#39;Helvetica Neue Light&#39;, &#39;Helvetica Neue&#39;, Helvetica, Arial, &#39;Lucida Grande&#39;, sans-serif; font-size: 1em;">, ya que no se está especificando una lista de valores.</span></p>
<p>Se puede<strong> crear una tabla e insertar datos a partir de una consulta</strong>. Podemos crear la tabla<span>&nbsp;</span><span>&nbsp;</span><span><code>USUARIOS_CON_CREDITO</code></span>&nbsp;partiendo de la tabla usuario, si queremos crearla exactamente con el mismo número de campos y con su contenido pondremos:</p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> USUARIOS_CON_CREDITO <span class="token keyword">AS</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> USUARIOS <span class="token keyword">WHERE</span> CREDITO <span class="token operator">&gt;</span><span class="token number">0</span> <span class="token punctuation">;</span></code></pre>
</div>
</div>
<p>Si queremos crear una tabla USUARIAS con la misma estructura, pero sin contenido especificaremos una condición que no se cumpla nunca y así ningún registro se copiará:<span>&nbsp;&nbsp;</span><span></span></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> USUARIAS <span class="token keyword">AS</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> USUARIOS <span class="token keyword">WHERE</span> <span class="token number">1</span> <span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<p>A partir de aquí podremos insertar en esta nueva tabla:&nbsp;<span style="font-family: &#39;DejaVu Sans Mono&#39;; font-size: 12px; font-weight: bold;"></span></p>
<div class="editor-indent">
<div class="editor-indent">
<div class="editor-indent">
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> USUARIAS 
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> USUARIOS <span class="token keyword">WHERE</span> UPPER<span class="token punctuation">(</span>SEXO<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'M'</span><span class="token punctuation">;</span>
</code></pre>
</div>
</div>
<code><br></code></div>
</div>
</div>
<p>Observa que en ese caso no es necesario incorporar en la instrucción la palabra&nbsp;<code><span>VALUES</span></code>&nbsp;ya que para cada fila insertada incorporamos los valores correspondientes a todas las columnas de la tabla de destino.</p>
<p><span style="font-family: HelveticaNeue-Light, &#39;Helvetica Neue Light&#39;, &#39;Helvetica Neue&#39;, Helvetica, Arial, &#39;Lucida Grande&#39;, sans-serif; font-size: 1em;"></span></p>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id31-14">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-31_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion31_60" class="block question iDevice_content">
<strong>¿Cuál de las siguientes sentencias <code>INSERT</code> es la correcta para insertar en la tabla CLIENTES los nombres de los registros de la tabla NUEVOS_CLIENTES, suponiendo que los campos que contienen los nombres se llaman Nombre_CLI en la tabla CLIENTES y Nombre_NCLI en la tabla NUEVOS_CLIENTES?</strong>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i31_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_63">Opción 1</a></label><input type="radio" name="option31_60" id="i31_63" class="exe-radio-option exe-radio-option-0-4-31_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-31_63"><div id="taans31_63" class="block iDevice_content">
<code>INSERT INTO CLIENTES (Nombre_CLI) VALUES Nombre_NCLI FROM NUEVOS_CLIENTES;</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i31_144" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_144">Opción 2</a></label><input type="radio" name="option31_60" id="i31_144" class="exe-radio-option exe-radio-option-1-4-31_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-31_144"><div id="taans31_144" class="block iDevice_content">
<code>INSERT INTO CLIENTES (Nombre_CLI) VALUES (SELECT Nombre_NCLI FROM NUEVOS_CLIENTES);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i31_147" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_147">Opción 3</a></label><input type="radio" name="option31_60" id="i31_147" class="exe-radio-option exe-radio-option-2-4-31_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-31_147"><div id="taans31_147" class="block iDevice_content">
<code>INSERT INTO CLIENTES VALUES (SELECT Nombre_CLI, Nombre_NCLI FROM NUEVOS_CLIENTES);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i31_150" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_150">Opción 4</a></label><input type="radio" name="option31_60" id="i31_150" class="exe-radio-option exe-radio-option-3-4-31_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-31_150"><div id="taans31_150" class="block iDevice_content">
<code>INSERT INTO NUEVOS_CLIENTES (Nombre_CLI) VALUES (SELECT Nombre_NCLI FROM CLIENTES);</code>

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b31_60" class="feedback js-hidden">
<div id="taf31_63" class=" iDevice_content">
Incorrecto. Falta la sentencia SELECT.

</div>
</section>
<section id="sa1b31_60" class="feedback js-hidden">
<div id="taf31_144" class=" iDevice_content">
¡Muy bien!

</div>
</section>
<section id="sa2b31_60" class="feedback js-hidden">
<div id="taf31_147" class=" iDevice_content">
No es correcto. El campo Nombre_CLI pertenece a la tabla CLIENTES.

</div>
</section>
<section id="sa3b31_60" class="feedback js-hidden">
<div id="taf31_150" class=" iDevice_content">
No es cierto. El orden de las tablas es el contrario.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_63">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b31_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_144">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b31_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_147">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa2b31_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-31_150">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa3b31_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-15">
<header class="nodeDecoration">
<h1 id="exenode_15_52Modificacinderegistrosapartirdeunaconsulta" class="nodeTitle">5.2.- Modificación de registros a partir de una consulta.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id32-15">
<div class="iDevice emphasis0">
<div id="ta32_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R32_UPDATE_SELECT.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R32_UPDATE_SELECT_miniatura.png" alt="Diagrama con icono de base de datos, tablas y símbolo de actualización." title="Actualización con subconsulta. Pulsar para ampliar" class="imagen_ampliable" width="200" height="129"></a>
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>La acción de actualizar registros mediante la sentencia <code><em>UPDATE</em></code> también puede ser utilizada con consultas para realizar modificaciones más complejas de los datos. Las consultas pueden formar parte de cualquiera de los elementos de la sentencia <code><em>UPDATE</em></code>.</p>
<p>Por ejemplo, la siguiente sentencia modifica el crédito de aquellos usuarios que tienen una partida creada y cuyo estado es 1 (activada). El valor del crédito que se les asigna es el valor más alto de los créditos de todos los usuarios.</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">UPDATE</span> USUARIOS <span class="token keyword">SET</span> Credito <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>Credito<span class="token punctuation">)</span> <span class="token keyword">FROM</span> 
USUARIOS<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> Login <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Cod_Creador <span class="token keyword">FROM</span> PARTIDAS <span class="token keyword">WHERE</span> Estado<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre><br><br></pre>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id33-15">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-33_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion33_60" class="block question iDevice_content">
<strong>¿Cuál de las siguientes sentencias <code><em>UPDATE</em></code> es la correcta para actualizar en la tabla USUARIOS el crédito del usuario con código 3 para asignarle el mismo crédito que el del usuario con código 5?</strong> 

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i33_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_63">Opción 1</a></label><input type="radio" name="option33_60" id="i33_63" class="exe-radio-option exe-radio-option-0-4-33_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-33_63"><div id="taans33_63" class="block iDevice_content">
<code>UPDATE  USUARIOS SET Credito = Credito WHERE Codigo = 3 AND WHERE Codigo = 5;</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i33_155" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_155">Opción 2</a></label><input type="radio" name="option33_60" id="i33_155" class="exe-radio-option exe-radio-option-1-4-33_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-33_155"><div id="taans33_155" class="block iDevice_content">
<code>UPDATE  USUARIOS SET Credito = (SELECT Credito FROM USUARIOS WHERE Codigo = 3 AND WHERE Codigo = 5);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i33_158" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_158">Opción 3</a></label><input type="radio" name="option33_60" id="i33_158" class="exe-radio-option exe-radio-option-2-4-33_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-33_158"><div id="taans33_158" class="block iDevice_content">
<code>UPDATE  USUARIOS SET Codigo = 5 WHERE (SELECT Credito FROM USUARIOS WHERE Codigo = 3);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i33_161" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_161">Opción 4</a></label><input type="radio" name="option33_60" id="i33_161" class="exe-radio-option exe-radio-option-3-4-33_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-33_161"><div id="taans33_161" class="block iDevice_content">
<code>UPDATE  USUARIOS SET Credito = (SELECT Credito FROM USUARIOS WHERE Codigo = 3) WHERE Codigo = 5;</code>

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b33_60" class="feedback js-hidden">
<div id="taf33_63" class=" iDevice_content">
Incorrecto. El formato no es correcto.

</div>
</section>
<section id="sa1b33_60" class="feedback js-hidden">
<div id="taf33_155" class=" iDevice_content">
No es cierto. La condición WHERE no está bien formada.

</div>
</section>
<section id="sa2b33_60" class="feedback js-hidden">
<div id="taf33_158" class=" iDevice_content">
No es correcto. No se debe asignar el valor 5 al código.

</div>
</section>
<section id="sa3b33_60" class="feedback js-hidden">
<div id="taf33_161" class=" iDevice_content">
¡Muy bien!

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_63">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b33_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_155">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b33_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_158">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa2b33_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-33_161">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa3b33_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-16">
<header class="nodeDecoration">
<h1 id="exenode_16_53Supresinderegistrosapartirdeunaconsulta" class="nodeTitle">5.3.- Supresión de registros a partir de una consulta.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id34-16">
<div class="iDevice emphasis0">
<div id="ta34_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R33_DELETE_SELECT.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R33_DELETE_SELECT_miniatura.png" alt="Diagrama con icono de base de datos, tablas y símbolo de borrado." title="Borrado con subconsulta. Pulsar para ampliar" class="imagen_ampliable" width="200" height="129"></a>
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación.</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso Educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>Al igual que las sentencias <code><em>INSERT</em></code> y <code><em>UPDATE</em></code> vistas anteriormente, también se pueden hacer borrados de registros utilizando consultas como parte de las tablas donde se hará la eliminación o como parte de la condición que delimita la operación.</p>
<p>Por ejemplo, si se ejecuta la siguiente sentencia:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> LOGIN <span class="token keyword">FROM</span> USUARIOS<span class="token punctuation">,</span> UNEN <span class="token keyword">WHERE</span> CODIGO_USUARIO<span class="token operator">=</span>LOGIN <span class="token operator">AND</span> PROVINCIA<span class="token operator">=</span><span class="token string">'PALENCIA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="box generalbox book_content" id="yui_3_17_2_1_1597742051605_140">
<div class="no-overflow" id="yui_3_17_2_1_1597742051605_139">
<div id="yui_3_17_2_1_1597742051605_144">
<p id="yui_3_17_2_1_1597742051605_143">El resultado es que se eliminan determinados registros de las tablas<span>&nbsp;<code>USUARIOS</code> y<code>&nbsp;</code></span><code><em>UNEN</em></code>, en concreto, aquellos registros de la tabla<code> UNEN</code> asociados a algún usuario de PALENCIA.</p>
<p>Puedes observar que no se ha establecido ninguna condición&nbsp;<span><code>WHERE</code>&nbsp;</span>en la sentencia, ya que se ha incluido dentro de la consulta. Otra manera de realizar la misma acción, pero utilizando la cláusula&nbsp;<span><code>WHERE</code>&nbsp;</span>es la siguiente:</p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> LOGIN<span class="token punctuation">,</span> PROVINCIA <span class="token keyword">FROM</span> USUARIOS<span class="token punctuation">,</span> UNEN <span class="token keyword">WHERE</span> CODIGO_USUARIO<span class="token operator">=</span>LOGIN<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> PROVINCIA<span class="token operator">=</span><span class="token string">'PALENCIA'</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id35-16">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-35_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion35_60" class="block question iDevice_content">
<strong>¿Cuál de las siguientes sentencias <code>DELETE</code> es la correcta para eliminar de la tabla USUARIOS todos aquellos cuyo código se encuentra en una tabla llamada ANTIGUOS?</strong>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i35_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_63">Opción 1</a></label><input type="radio" name="option35_60" id="i35_63" class="exe-radio-option exe-radio-option-0-4-35_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-35_63"><div id="taans35_63" class="block iDevice_content">
<code>DELETE FROM USUARIOS WHERE Codigo IN (SELECT Codigo FROM ANTIGUOS);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i35_166" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_166">Opción 2</a></label><input type="radio" name="option35_60" id="i35_166" class="exe-radio-option exe-radio-option-1-4-35_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-35_166"><div id="taans35_166" class="block iDevice_content">
<code>DELETE FROM USUARIOS WHERE Codigo IN ANTIGUOS;</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i35_169" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_169">Opción 3</a></label><input type="radio" name="option35_60" id="i35_169" class="exe-radio-option exe-radio-option-2-4-35_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-35_169"><div id="taans35_169" class="block iDevice_content">
<code>DELETE FROM (SELECT Codigo FROM ANTIGUOS) WHERE Codigo IN (SELECT Codigo FROM USUARIOS);</code>

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i35_172" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_172">Opción 4</a></label><input type="radio" name="option35_60" id="i35_172" class="exe-radio-option exe-radio-option-3-4-35_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-35_172"><div id="taans35_172" class="block iDevice_content">
<code>DELETE FROM Codigo WHERE USUARIOS IN (SELECT Codigo FROM ANTIGUOS);</code>

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b35_60" class="feedback js-hidden">
<div id="taf35_63" class=" iDevice_content">
¡Muy bien!

</div>
</section>
<section id="sa1b35_60" class="feedback js-hidden">
<div id="taf35_166" class=" iDevice_content">
Incorrecto. Falta la subconsulta.

</div>
</section>
<section id="sa2b35_60" class="feedback js-hidden">
<div id="taf35_169" class=" iDevice_content">
No es correcto.  Las consultas deben ser las contrarias.

</div>
</section>
<section id="sa3b35_60" class="feedback js-hidden">
<div id="taf35_172" class=" iDevice_content">
No es cierto. Detrás de FROM se debe indicar el nombre de la tabla.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_63">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b35_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_166">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b35_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_169">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa2b35_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-35_172">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa3b35_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-17">
<header class="nodeDecoration">
<h1 id="exenode_17_6Transacciones" class="nodeTitle">6.- Transacciones.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id36-17">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta36_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_03.jpg" alt="Ana." title="Ana." class="elemento_derecha" width="200" height="134">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder la web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación.</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso Educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br></p>
<p>Ana ha estado haciendo algunas pruebas del funcionamiento de la aplicación y ha observado un error: Con los créditos que dispone un determinado usuario ha empezado la creación de una nueva partida, pero antes de finalizar el proceso de creación de la partida ha utilizado un botón "Cancelar" para simular que el usuario ha optado por dar marcha atrás en la creación de la partida. En ese caso, el crédito del usuario debería permanecer inalterado, ya que no ha finalizado el proceso de creación de la partida, pero ha observado los datos que hay en la base de datos y se encuentra con que el crédito del usuario se ha decrementado.</p>
<p>Al comentarle el problema a Juan, éste le comenta que debe gestionar ese proceso utilizando transacciones.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id37-17">
<div class="iDevice emphasis0">
<div id="ta37_73" class="block iDevice_content">
<p>Una transacción es una unidad atómica (no se puede dividir) de trabajo que contiene una o más sentencias SQL. Las transacciones agrupan sentencias SQL de tal manera que a todas ellas se le aplica una operación <code><em>COMMIT</em></code>, que podríamos traducir como confirmadas, aplicadas o guardadas en la base de datos, o bien a todas ellas se les aplica la acción <code><em>ROLLBACK</em></code>, que interpretamos como deshacer las operaciones que deberían hacer sobre la base de datos.</p>
<p>Un ejemplo de transacción sería el proceso de transferencia entre cuentas bancarias. Supongamos que Juan hace una transferencia de 100 euros de su cuenta a la de María. Básicamente, las operaciones a realizar en las tablas serías:</p>
<ol>
<li>Actualizar la cuenta de Juan restándole al saldo 100 euros</li>
<li>Registrar el movimiento de decremento de 100 euros en los movimientos de la cuenta de Juan</li>
<li>Actualizar la cuenta de María incrementándola con 100 euros</li>
<li>Registrar el movimiento de incremento de 100 euros en los movimientos de la cuenta de María.</li>
</ol>
<p>¿ Qué pasaría si hubiese un corte o caída en el sistema después de efectuarse el punto 2?. ¿ Dónde estarían esos 100 euros? Juan ya no los tiene, pero María tampoco.</p>
<p>Para evitar situaciones de estas se utilizan las transacciones, de forma que las 4 operaciones sean consideradas como una única operación y, o se realizan las 4, o no se realiza ninguna, es decir, hasta que no estén las 4 realizadas, no se confirma (<code>COMMIT</code>) la operación. Si hay problemas antes de que se realicen las 4, se deshacen (<code>ROLLBACK</code>)&nbsp; las operaciones hechas que han dejado a medias el proceso.</p>
<p>Como ves, esta característica da robustez y seguridad a un SGBD asegurando la consistencia de los datos. El SGBD Oracle es el más potente a nivel transaccional.</p>
<p>Mientras que sobre una transacción no se haga <code><em>COMMIT</em></code>, los resultados de ésta pueden deshacerse. El efecto de una sentencia del lenguaje de manipulación de datos (<acronym title="Data Manipulation Language.">DML</acronym>) no es permanente hasta que se hace la operación <code><em>COMMIT</em></code> sobre la transacción en la que esté incluida o hasta que se ejecuta una operación DDL.</p>
<p>Las transacciones de Oracle cumplen con las propiedades básicas de las transacciones en base de datos:</p>
<ul class="lista_verificacion">
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#t51a31a2e-7cea-b124-f519-f2066b34838b" id="link51a31a2e-7cea-b124-f519-f2066b34838b" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="3" oldtitle="Atomicidad | " title="">Atomicidad</a>: Todas las tareas de una transacción son realizadas correctamente, o si no, no se realiza ninguna de ellas. No hay transacciones parciales. Por ejemplo, si una transacción actualiza 100 registros, pero el sistema falla tras realizar 20, entonces la base de datos deshace los cambios realizados a esos 20 registros.</li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#t712b1183-54ec-d672-2f51-b7297f705fe7" id="link712b1183-54ec-d672-2f51-b7297f705fe7" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="4" oldtitle="Consistencia | " title="">Consistencia</a>: La transacción se inicia partiendo de un estado consistente de los datos y finaliza dejándola también con los datos consistentes.</li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#t11fa5103-86ad-67fa-7006-413207b093a9" id="link11fa5103-86ad-67fa-7006-413207b093a9" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="5" oldtitle="Aislamiento | " title="">Aislamiento</a>: El efecto de una transacción no es visible por otras transacciones hasta que finaliza.</li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#tcc6c7b13-0c48-e002-2bda-d5e38f193860" id="linkcc6c7b13-0c48-e002-2bda-d5e38f193860" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="6" oldtitle="Durabilidad | " title="">Durabilidad</a>: Los cambios efectuados por las transacciones que han <a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#td12a1cf8-5611-cd90-d4fe-3144f55f534a" id="linkd12a1cf8-5611-cd90-d4fe-3144f55f534a" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="7" oldtitle="Volcado | " title="">volcado</a> sus modificaciones, se hacen permanentes.</li>
</ul>
<p>Las sentencias de control de transacciones gestionan los cambios que realizan las sentencias DML y las agrupa en transacciones. Estas sentencias te permiten realizar las siguientes acciones:</p>
<ul class="lista_verificacion">
<li>Hacer permanentes los cambios producidos por una transacción (<code><em><strong>COMMIT</strong></em></code>).</li>
<li>Deshacer los cambios de una transacción (<code><strong><em>ROLLBACK</em></strong></code>) desde que fue iniciada o desde un <a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#tfcabecbb-25e4-72aa-ee36-eb49a9ed856c" id="linkfcabecbb-25e4-72aa-ee36-eb49a9ed856c" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="8" oldtitle="Punto de restauración | " title="">punto de restauración</a> (<code><strong><em>ROLLBACK TO SAVEPOINT</em></strong></code>). Un punto de restauración es un marcador que puedes establecer dentro del contexto de la transacción. Debes tener en cuenta que la sentencia <code><em>ROLLBACK</em></code> finaliza la transacción, pero <code><em>ROLLBACK TO SAVEPOINT</em></code> no la finaliza.</li>
<li>Establecer un punto intermedio (<code><strong><em>SAVEPOINT</em></strong></code>) a partir del cual se podrá deshacer la transacción.</li>
<li>Indicar propiedades para una transacción (<code><strong><em>SET TRANSACTION</em></strong></code>). P<span>or ejemplo podemos elegir READ ONLY y no se permitirán modificaciones.</span></li>
<li>Especificar si una restricción de integridad aplazable se comprueba después de cada sentencia DML o cuando se ha realizado el <code><em>COMMIT</em></code> de la transacción (<code><strong><em>SET CONSTRAINT</em></strong></code>)<span>&nbsp;podemos elegir IMMEDIATE o DEFERRED, es decir, se comprueba la transacción inmediatamente después de cada orden DML o cuando haya sido confirmada</span></li>
</ul>
<div id="t51a31a2e-7cea-b124-f519-f2066b34838b" class="exe-tooltip-text">
<p>Se dice que una operación es atómica cuando es imposible para otra parte de un sistema encontrar pasos intermedios. Si esta operación consiste en una serie de pasos, todos ellos ocurren o ninguno. Por ejemplo en el caso de una transacción bancaria o se ejecuta tanto el deposito y la deducción o ninguna acción es realizada.</p>
</div>
<div id="t712b1183-54ec-d672-2f51-b7297f705fe7" class="exe-tooltip-text">
<p>asegura que cada usuario tiene una vista consistente de los datos, incluyendo los cambios visibles realizados por las transacciones del mismo usuario y las transacciones finalizadas de otros usuarios. Asegura que los datos que estás siendo consultados o modificados por un usuario no pueden ser cambiados por otros hasta que el usuario haya finalizado la operación completa</p>
</div>
<div id="t11fa5103-86ad-67fa-7006-413207b093a9" class="exe-tooltip-text">
<p>El efecto de una transacción no es visible por otras transacciones hasta que finaliza.</p>
</div>
<div id="tcc6c7b13-0c48-e002-2bda-d5e38f193860" class="exe-tooltip-text">
<p>Los cambios efectuados por las transacciones que han volcado sus modificaciones, se hacen permanentes.</p>
</div>
<div id="td12a1cf8-5611-cd90-d4fe-3144f55f534a" class="exe-tooltip-text">
<p>Transferir los datos desde un sistema de almacenamiento de datos a otro, normalmente desde la memoria principal al disco duro</p>
</div>
<div id="tfcabecbb-25e4-72aa-ee36-eb49a9ed856c" class="exe-tooltip-text">Forma de implementar subtransacciones (también conocidas como transacciones anidadas) dentro de un sistema gestor de base de datos relacional indicando un punto dentro de una transacción de base de datos que puede ser devuelta sin afectar a cualquier trabajo realizado en la transacción antes de que el punto de recuperación fuera creado. Varios puntos de restauración pueden existir dentro de una transacción individual. Los puntos de restauración son útiles para implementar recuperación de errores complejos en aplicaciones de base de datos. Si ocurre un error en el medio de una transacción de múltiples sentencias, la aplicación puede ser capaz de recuperarse del error (volviendo hasta un punto de restauración) sin necesidad de abortar la transacción completa.
<p></p>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-18">
<header class="nodeDecoration">
<h1 id="exenode_18_61Hacercambiospermanentes" class="nodeTitle">6.1.- Hacer cambios permanentes.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id38-18">
<div class="iDevice emphasis0">
<div id="ta38_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R35_CONFIRMA_AUTOM.png" title="Ampliar imagen."></a></div>
</div>
<p>Una transacción comienza cuando se encuentra la primera sentencia SQL ejecutable. Para que los cambios producidos durante la transacción se hagan permanentes (no puedan deshacerse), se dispone de las siguientes opciones:</p>
<ul class="lista_verificacion">
<li>Utilizar la sentencia <code><em>COMMIT</em></code>, la cual ordena a la base de datos que haga permanentes las acciones incluidas en la transacción.</li>
<li>Ejecutar una sentencia <acronym title="Data Definition Language.">DDL</acronym> (como <code><em>CREATE</em></code>, <code><em>DROP</em></code>, <code><em>RENAME</em></code>, o <code><em>ALTER</em></code>). La base de datos ejecuta implícitamente una orden <code><em>COMMIT</em></code> antes y después de cada sentencia DDL.</li>
<li>Si el usuario cierra adecuadamente las aplicaciones de gestión de las bases de datos Oracle, se produce un volcado permanente de las cambios efectuados por la transacción.</li>
</ul>
<p>Para que los cambios se puedan deshacer con <code>ROLLBACK</code> es necesario que la variable de confirmación (<code>AUTOCOMMIT</code>) esté a <code>OFF</code>.&nbsp; Si está con el valor<code> ON</code> cada sentencia se confirmará tras su ejecución.</p>
<figure class="exe-figure exe-image float-left license-copyright" style="width: 201px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_6_1A..JPG" rel="lightbox" title="Preferencias SQLDeveloper"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_6_1A..JPG" alt="SQLDeveloper. Opcion del menú Herramientas -&gt; preferencias para aceder a la modificación de la variable autocommit" title="SQLDeveloper. Menu desplegado de opción Herramientas. Pulsar para ampliar." width="201" height="144"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Acceder a la web oficial de Oracle" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><span style="font-size: 1em;">Podemos mod</span><span style="font-size: 1em;">ifi</span><span style="font-size: 1em;">car y comprobar su valor, bien desde <strong>SQLDeveloper</strong> eligiendo la opción Herramientas -&gt; Preferencias , abriendo la opción Avanzada de Base de Datos y marcando o desmarcando la casilla de Co</span><span style="font-size: 1em;">nfir</span><span style="font-size: 1em;">mación automática, como se muestra en la imagen.&nbsp;</span></p>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 201px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_6_1..JPG" rel="lightbox" title="Opcion autoconfirmación SQLdeveloper"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_6_1..JPG" alt="Pantalla Preferencia con opción Confirmación automática SQLDeeloper" title="Confirmación Automática SQLDeveloper. Pulsar para ampliar" width="201" height="145" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<figure>
<figcaption>O bien desde<strong> SQLPlus</strong>. El comando <code>show autocommit</code> muestra el valor de la variable para la sesión actual. Podemos cambiar el valor de la variable con el comando <code>SET</code></figcaption>
</figure>
<figure class="exe-figure exe-image position-center license-copyright" style="width: 199px;"><a href="./BD05 - Tratamiento de datos_files/BD05_CONT_Commit.JPG" rel="lightbox" title="Autocommit desde SQLPlus"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_Commit.JPG" alt="Cmando SQLPLUS  show autocommit que muestra el valor de la variable." title="Variable autocommit desde SQLPlus. Pulsar para ampliar" width="199" height="112" style="vertical-align: middle;"></a>
<figcaption class="figcaption"><a href="https://www.oracle.com/es/index.html" target="_blank" class="author" title="Accede a la web oficial de Oracle  (se abre en una ventana nueva)" rel="noopener">Oracle Corporation</a> <span class="license"><span class="sep">(</span><span>Todos los derechos reservados</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br><br><br><br></p>
<p></p>
<p></p>
<p></p>
<p></p>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id39-18">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-39_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion39_60" class="block question iDevice_content">
<strong>¿Si se cierra correctamente la aplicación gráfica después de haber realizado una operación de modificación de datos, y no se ha indicado la opción de Confirmación automática, ni se ha ejecutado la sentencia <code>COMMIT</code>, se quedan guardados los cambios efectuados por la transacción?</strong> 

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-39_63">Opción 1</a></label><input type="radio" name="option39_60" id="i39_63" class="exe-radio-option exe-radio-option-0-2-39_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_63"><div id="taans39_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i39_179" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-39_179">Opción 2</a></label><input type="radio" name="option39_60" id="i39_179" class="exe-radio-option exe-radio-option-1-2-39_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-39_179"><div id="taans39_179" class="block iDevice_content">
Falso.

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b39_60" class="feedback js-hidden">
<div id="taf39_63" class=" iDevice_content">
Correcto, al cerrar el entorno gráfico se vuelcan los cambios de los datos que pudieran quedar pendientes de la última transacción.

</div>
</section>
<section id="sa1b39_60" class="feedback js-hidden">
<div id="taf39_179" class=" iDevice_content">
Vuelve a intentarlo, porque la respuesta que has dado no es correcta.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-39_63">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b39_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-39_179">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b39_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-19">
<header class="nodeDecoration">
<h1 id="exenode_19_62Deshacercambios" class="nodeTitle">6.2.- Deshacer cambios.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id40-19">
<div class="iDevice emphasis0">
<div id="ta40_73" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-pd" style="width: 160px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R36_DESHACER.png" alt="Flecha curva izquierda." title="Deshacer." class="elemento_derecha" width="160" height="160">
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/File:Edit-undo.svg" target="_blank" class="author" title="Acceder a la web de la imagen (se abre en una ventana nueva)" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span>Dominio público</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br>La sentencia <code><em>ROLLBACK</em></code> permite deshacer los cambios efectuados por la transacción actual, dándola además por finalizada.</p>
<p>Siempre se recomienda que explícitamente finalices las transacciones en las aplicaciones usando las sentencias <code><em>COMMIT</em></code> o <code><em>ROLLBACK</em></code>.</p>
<p>Recuerda que si no se han hecho permanentes los cambios de una transacción, y la aplicación termina incorrectamente, la base de datos de Oracle retorna al estado de la última transacción volcada, deshaciendo los cambios de forma implícita.</p>
<p>Para deshacer los cambios de la transacción simplemente debes indicar:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
</code></pre>
</div>
</div>
<p><span style="font-family: HelveticaNeue-Light, &#39;Helvetica Neue Light&#39;, &#39;Helvetica Neue&#39;, Helvetica, Arial, &#39;Lucida Grande&#39;, sans-serif; font-size: 1em;">Hay que tener en cuenta que si una transacción termina de forma anormal, por ejemplo, por un fallo de ejecución, los cambios que hasta el momento hubiera realizado la transacción son deshechos de forma automática.</span></p>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id41-19">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-41_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion41_60" class="block question iDevice_content">
<strong>¿Se pueden deshacer los cambios con la sentencia <code>ROLLBACK</code> después de que se haya ejecutado <code>COMMIT</code>?</strong>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i41_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-41_63">Opción 1</a></label><input type="radio" name="option41_60" id="i41_63" class="exe-radio-option exe-radio-option-0-2-41_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-41_63"><div id="taans41_63" class="block iDevice_content">
Verdadero.

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i41_183" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-41_183">Opción 2</a></label><input type="radio" name="option41_60" id="i41_183" class="exe-radio-option exe-radio-option-1-2-41_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-41_183"><div id="taans41_183" class="block iDevice_content">
Falso.

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b41_60" class="feedback js-hidden">
<div id="taf41_63" class=" iDevice_content">
Vuelve a intentarlo, porque la respuesta que has dado no es correcta.

</div>
</section>
<section id="sa1b41_60" class="feedback js-hidden">
<div id="taf41_183" class=" iDevice_content">
Correcto. Si se termina la transacción ya no se pueden deshacer los cambios.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-41_63">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b41_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-41_183">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b41_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id42-19">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta42_47" class="block iDevice_content">
<p>
Ejemplo sobre el uso de <code>Rollback</code>.
</p>
<p class="enlace_centrado">
<a href="http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14261/sqloperations.htm#CJACGAFD" title="Acceder a ejemplo en la página de Oracle: &#39;Performing SQL operations from PL/SQL&#39;" target="_self">Ejemplo de <code>Rollback</code>.</a>
</p>

</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-20">
<header class="nodeDecoration">
<h1 id="exenode_20_63Deshacercambiosparcialmente" class="nodeTitle">6.3.- Deshacer cambios parcialmente.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id43-20">
<div class="iDevice emphasis0">
<div id="ta43_73" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-pd" style="width: 160px;"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R37_SAVEPOINT.png" alt="Flecha izquierda con barra vertical." title="Deshacer parcial." class="elemento_derecha" width="160" height="160">
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/File:Go-first.svg" target="_blank" class="author" title="Acceder a la web de la imagen (se abre en una ventana nueva)" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span>Dominio público</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br>Un punto de restauración (<code><em>SAVEPOINT</em></code>) es un marcador intermedio declarado por el usuario en el contexto de una transacción. Los puntos de restauración dividen una transacción grande en pequeñas partes.</p>
<p>Si usas puntos de restauración en una transacción larga, tendrás la opción de deshacer los cambios efectuados por la transacción antes de la sentencia actual en la que se encuentre, pero después del punto de restauración establecido. Así, si se produce un error, no es necesario rehacer todas las sentencias de la transacción completa, sino sólo aquellos posteriores al punto de restauración.</p>
<p>Para establecer un punto de restauración se utiliza la sentencia <code><em>SAVEPOINT</em></code> con la sintaxis:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">SAVEPOINT</span> nombre_punto_restauración<span class="token punctuation">;</span></code></pre>
</div>
</div>
<pre></pre>
</div>
<p>La restauración de los cambios hasta ese punto se hará con un comando con el siguiente formato:</p>
<div>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> <span class="token keyword">SAVEPOINT</span> nombre_punto_restauración<span class="token punctuation">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id44-20">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta44_47" class="block iDevice_content">
<p>Artículo sobre los puntos de restauración.</p>
<p class="enlace_centrado"><a href="http://es.wikipedia.org/wiki/Savepoint" title="Acceder al artículo sobre los puntos de restauración en Wikipedia." target="_self"><span lang="en">Savepoint</span>.</a></p>
<p>Ejemplo sobre el uso de los puntos de restauración.</p>
<p class="enlace_centrado"><a href="http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14261/sqloperations.htm#BABGAAIG" title="Acceder a ejemplo en la página de Oracle: &#39;Performing SQL operations from PL/SQL&#39;" target="_self">Ejemplo de punto de restauración.</a></p>
<p class="enlace_centrado" style="text-align: left;">Artículo sobre Control de transacciones con ejemplos</p>
<p class="enlace_centrado"><a href="https://desarrolloweb.com/articulos/control-transacciones-oracle.html" target="_blank" title="Accede a una web sobre control de transaccions con ejemplos (se abre en una ventana nueva)" rel="noopener">Control transacciones</a></p>
</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-2-node" id="exe-node-21">
<header class="nodeDecoration">
<h1 id="exenode_21_7Problemasasociadosalaccesosimultneoalosdatos" class="nodeTitle">7.- Problemas asociados al acceso simultáneo a los datos.</h1>
</header>
<article class="iDevice_wrapper CasopracticofpdIdevice em_iDevice" id="id45-21">
<div class="iDevice emphasis_casopracticofpd">
<header class="iDevice_header" style="background-image:url(icon_casopracticofpd.png)"><h2 class="iDeviceTitle">Caso práctico</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta45_66" class="block iDevice_content">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><img src="./BD05 - Tratamiento de datos_files/CASO_PERSONAJES_03.jpg" alt="Ana." title="Ana." class="elemento_derecha" width="200" height="134" style="width: 200px; height: 134px;">
<figcaption class="figcaption"><a href="https://www.educacionyfp.gob.es/portada.html" target="_blank" class="author" title="Acceder a  la Web del Ministerio de Educación y FP (se abre en una ventana nueva)" rel="noopener">Ministerio de Educación</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
<p><br>Ana tiene una duda que le quiere preguntar a Juan, ya que se ha estado planteando qué ocurre en el supuesto caso de que dos operaciones simultáneas modifiquen un mismo registro. Por ejemplo, si se ofrece la posibilidad de que se puedan transferir créditos de un usuario a otro, qué ocurriría si justo en un mismo momento dos usuarios le regalan crédito a un tercero. ¿Podría ocurrir que sólo llegara a realizarse una de las dos operaciones?</p>
<p>Para explicarle su idea le plantea el siguiente supuesto: El usuario A no disponía de crédito antes de realizar esas operaciones. El usuario B le va a dar 100 y el C dará 50. Cuando se inicia la operación de B, observa que el saldo de A en ese momento es 0. Cuando todavía no ha terminado la operación de B, se inicia simultáneamente la de C, que consulta el saldo de A que sigue siendo 0 todavía. Cuando B termina de transferir el crédito a A, el saldo se pone a 100 puesto que tenía 0 y le suma sus 100. Pero C estaba haciendo lo mismo, y al saldo 0 que tenía cuando hizo la consulta, le suma 50, por lo que al final sólo le quedará a A como saldo 50 en vez de 150.</p>
<p>Juan le responde que ese tipo de problemas de acceso simultáneo a los datos están controlados en las bases de datos con lo que se denomina bloqueos.</p>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id46-21">
<div class="iDevice emphasis0">
<div id="ta46_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado">
<figure class="exe-figure exe-image float-right license-custom" style="width: 183px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R38_MULTIUSUARIO.png" title="Ampliar imagen."><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R38_MULTIUSUARIO_miniatura.png" alt="Iconos de personas unidas a icono de base datos." title="Acceso multiusuario." class="imagen_ampliable" width="183" height="160" style="width: 183px; height: 160px;"></a>
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/Tango_icons" target="_blank" class="author" title="Accede a la web de la imagen" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>En una base de datos a la que accede un solo usuario, un dato puede ser modificado sin tener en cuenta que otros usuarios puedan modificar el mismo dato al mismo tiempo. Sin embargo, en una base de datos multiusuario, las sentencias contenidas en varias transacciones simultáneas pueden actualizar los datos simultáneamente. Las transacciones ejecutadas simultáneamente, deben generar resultados consistentes. Por tanto, una base de datos multiusuario debe asegurar:</p>
<ul class="lista_verificacion">
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#t58fa8d2e-4607-3a5d-9870-78130f9d6c59" id="link58fa8d2e-4607-3a5d-9870-78130f9d6c59" class="exe-tooltip definition-tt titled-tt blue-tt" data-hasqtip="9" oldtitle="Concurrencia de datos | " title=""><strong>Concurrencia de datos</strong></a>: asegura que los usuarios pueden acceder a los datos al mismo tiempo.</li>
<li><strong>Consistencia de datos</strong>: asegura que cada usuario tiene una vista consistente de los datos, incluyendo los cambios visibles realizados por las transacciones del mismo usuario y las transacciones finalizadas de otros usuarios.</li>
</ul>
<p>En una base de datos monousuario, no son necesarios los bloqueos ya que sólo modifica la información un solo usuario. Sin embargo, cuando varios usuarios acceden y modifican datos, la base de datos debe proveer un mecanismo para prevenir la modificación concurrente del mismo dato. Los bloqueos permiten obtener los siguientes requerimientos fundamentales en la base de datos:</p>
<ul class="lista_verificacion">
<li><strong>Consistencia</strong>: Los datos que están siendo consultados o modificados por un usuario no pueden ser cambiados por otros hasta que el usuario haya finalizado la operación completa.</li>
<li><strong>Integridad</strong>: Los datos y sus estructuras deben reflejar todos los cambios efectuados sobre ellos en el orden correcto.</li>
</ul>
<p>La base de datos Oracle proporciona concurrencia de datos, consistencia e integridad en las transacciones mediante sus mecanismos de bloqueo. Los bloqueos se realizan de forma automática y no requiere la actuación del usuario.</p>
<div id="t58fa8d2e-4607-3a5d-9870-78130f9d6c59" class="exe-tooltip-text">
<p>Coincidencia de acceso por parte de varios usuarios a los mismos datos a un mismo tiempo</p>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id47-21">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta47_47" class="block iDevice_content">
<p>
Interesante enlace sobre control de concurrencia.
</p>
<div class="enlace_centrado">
<a class="pdf" href="http://ocw.uc3m.es/ingenieria-informatica/diseno-y-administracion-de-bases-de-datos/teoria/Tema4_6%28Administracion_Concurrencia%29.pdf" title="Descargar documento sobre el control de concurrencia realizado por LABDA en la Universidad Carlos III de Madrid.  [pdf - 0.04 MB]" target="_self">Integridad. Control de concurrencia.</a> <span class="tamano"> (0.04 MB) </span> 
</div>

</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-22">
<header class="nodeDecoration">
<h1 id="exenode_22_71Polticasdebloqueo" class="nodeTitle">7.1.- Políticas de bloqueo.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id48-22">
<div class="iDevice emphasis0">
<div id="ta48_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado">
<figure class="exe-figure exe-image position-center license-custom" style="width: 199px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R39_BLOQUEO.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R39_BLOQUEO_miniatura.png" alt=" Iconos de personas con flechas a tabla con candados abiertos y cerrados." title="Bloqueos compartidos y exclusivos. Pulsar para ampliar" class="imagen_ampliable" width="199" height="160" style="width: 199px; height: 160px;"></a>
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/Tango_icons" target="_blank" class="author" title="Accede a la web de la imagen" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>La base de datos permite el uso de diferentes tipos de bloqueos, dependiendo de la operación que realiza el bloqueo.</p>
<p>Los bloqueos afectan a la interacción de lectores y escritores. Un lector es una consulta sobre un recurso, mientras que un escritor es una sentencia que realiza un modificación sobre un recurso. Las siguientes reglas resumen el comportamiento de la base de datos Oracle sobre lectores y escritores:</p>
<ul class="lista_verificacion">
<li>Un registro es bloqueado sólo cuando es modificado por un escritor: Cuando una sentencia actualiza un registro, la transacción obtiene un bloqueo sólo para ese registro.</li>
<li>Un escritor de un registro bloquea a otro escritor concurrente del mismo registro: Si una transacción está modificando una fila, un bloqueo del registro impide que otra transacción modifique el mismo registro simultáneamente.</li>
<li>Un lector nunca bloquea a un escritor: Puesto que un lector de un registro no lo bloquea, un escritor puede modificar dicho registro. La única excepción es la sentencia <code><em>SELECT … FOR UPDATE</em></code>, que es un tipo especial de sentencia <code><em>SELECT</em></code> que bloquea el registro que está siendo consultado.</li>
<li>Un escritor nunca bloquea a un lector: Cuando un registro está siendo modificado, la base de datos proporciona al lector una vista del registro sin los cambios que se están realizando.</li>
</ul>
<p>Hay dos mecanismos para el bloqueo de los datos en una base de datos: el bloqueo <strong>pesimista</strong> y bloqueo <strong>optimista</strong>. En el bloqueo pesimista de un registro o una tabla se realiza el bloqueo inmediatamente, en cuanto el bloqueo se solicita, mientras que en un bloqueo optimista el acceso al registro o la tabla sólo está cerrado en el momento en que los cambios realizados a ese registro se actualizan en el disco. Esta última situación sólo es apropiada cuando hay menos posibilidad de que alguien necesite acceder al registro mientras está bloqueado, de lo contrario no podemos estar seguros de que la actualización tenga éxito, porque el intento de actualizar el registro producirá un error si otro usuario actualiza antes el registro. Con el bloqueo pesimista se garantiza que el registro será actualizado.</p>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice" id="id49-22">
<div class="iDevice emphasis_autoevaluacionfpd">
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h2 class="iDeviceTitle">Autoevaluación</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-49_60" action="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion49_60" class="block question iDevice_content">
<strong>Supongamos que un usuario está en proceso de modificación de un registro, y otro en ese mismo momento quiere leer ese mismo registro. ¿Qué tipo de bloqueo debes establecer para que el segundo usuario obtenga los datos con los cambios que está efectuando el primero?</strong>

</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i49_63" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-49_63">Opción 1</a></label><input type="radio" name="option49_60" id="i49_63" class="exe-radio-option exe-radio-option-0-2-49_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-49_63"><div id="taans49_63" class="block iDevice_content">
Bloqueo pesimista.

</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i49_192" class="sr-av"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-49_192">Opción 2</a></label><input type="radio" name="option49_60" id="i49_192" class="exe-radio-option exe-radio-option-1-2-49_60-multi">
</p>
<div class="iDevice_answer-content" id="answer-49_192"><div id="taans49_192" class="block iDevice_content">
Bloqueo optimista.

</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback" role="status">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b49_60" class="feedback js-hidden">
<div id="taf49_63" class=" iDevice_content">
Correcto. Este tipo de bloqueo impide que un usuario lea los datos del registro hasta que se finalice la modificación que ha empezado otro.

</div>
</section>
<section id="sa1b49_60" class="feedback js-hidden">
<div id="taf49_192" class=" iDevice_content">
Incorrecto. Este bloqueo permite que se lean los datos con la versión que existía antes de que otro usuario comenzara a cambiarlos.

</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-49_63">Opción correcta</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa0b49_60">Retroalimentación</a>)</span></li>
<li><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#answer-49_192">Incorrecto</a><span> (<a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/index.html#sa1b49_60">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id50-22">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta50_47" class="block iDevice_content">
<p>
Documento, en inglés, sobre los bloqueos optimistas y pesimistas en Oracle con algunos ejemplos.
</p>
<div class="enlace_centrado">
 <a class="pdf" href="http://www.orafaq.com/papers/locking.pdf" title="Descargar un documento de Oracle FAQ sobre el bloqueo optimista con concurrencia en Oracle.  [pdf - 0.03 MB]" target="_self"><span lang="en">Optimistic Locking with Concurrency in Oracle.</span></a> <span class="tamano"> (0.03 MB) </span> 
</div>

</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-23">
<header class="nodeDecoration">
<h1 id="exenode_23_72Bloqueoscompartidosyexclusivos" class="nodeTitle">7.2.- Bloqueos compartidos y exclusivos.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id51-23">
<div class="iDevice emphasis0">
<div id="ta51_73" class="block iDevice_content">
<div class="elemento_derecha">
<div class="elemento_centrado">
<figure class="exe-figure exe-image position-center license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R40_TIPOS_BLOQUEOS.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R40_TIPOS_BLOQUEOS_miniatura.png" alt=" Iconos de personas con flechas a tabla con candados abiertos y cerrados." title="Bloqueos compartidos y exclusivos. Pulsar para ampliar" class="imagen_ampliable" width="200" height="122" style="width: 200px; height: 122px;"></a>
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/Tango_icons" target="_blank" class="author" title="Acceder a la web de la imagen (se abre en una ventana nueva)" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
</div>
<p>En general, la base de datos usa dos tipos de bloqueos: bloqueos exclusivos y bloqueos compartidos. Un recurso, por ejemplo un registro de una tabla, sólo puede obtener un bloqueo exclusivo, pero puede conseguir varios bloqueos compartidos.</p>
<ul class="lista_verificacion">
<li><strong>bloqueo exclusivo</strong>: Este modo previene que sea compartido el recurso asociado. Una transacción obtiene un bloqueo exclusivo cuando modifica los datos. La primera transacción que bloquea un recurso exclusivamente, es la única transacción que puede modificar el recurso hasta que el bloqueo exclusivo es liberado. Es el más estricto, cualquier transacción que intenta actualizar una fila en la tabla, debe esperar en cola. La instrucción que define este bloqueo será:</li>
</ul>
<ul></ul>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">LOCK</span> <span class="token keyword">TABLE</span> nombreTabla <span class="token operator">IN</span> EXCLUSIVE MODE</code></pre>
</div>
</div>
<ul class="lista_verificacion">
<li><strong>bloqueo compartido</strong>: Este modo permite que sea compartido el recurso asociado, dependiendo de la operación en la que se encuentra involucrado. Varios usuarios que estén leyendo datos pueden compartir los datos, realizando bloqueos compartidos para prevenir el acceso concurrente de un escritor que necesita un bloqueo exclusivo. Varias transacciones pueden obtener bloqueos compartidos del mismo recurso.</li>
</ul>
<p>Por ejemplo, supongamos que transacción usa la sentencia <code><em>SELECT … FOR UPDATE</em></code> para consultar un registro de una tabla. La transacción obtiene un bloqueo exclusivo del registro y un bloqueo compartido de la tabla. El bloqueo del registro permite a otras sesiones que modifiquen cualquier otro registro que no sea el registro bloqueado, mientras que el bloqueo de la tabla previene que otras sesiones modifiquen la estructura de la tabla. De esta manera, la base de datos permite la ejecución de todas las sentencias que sean posibles.</p>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id52-23">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta52_47" class="block iDevice_content">
<p>Definición y ejemplos del bloqueo exclusivo y compartido</p>
<div class="enlace_centrado"><a class="pdf" href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/IntegridadMariaGertrudis.pdf" title="Acceso a PDF libro electrónico integridad y control de concurrencia de María Gertrudis López perteneciente a la Universidad Central de Venezuela, Facultad de Ciencias, Escuela de Computación. ( se abre en  una ventana nueva) [pdf - 307,08 KB]" target="_blank" rel="noopener">Integridad y control de concurrencia.</a><span class="exe-link-data file-size"> (pdf - 307,08 <abbr title="KiloBytes" lang="en">KB</abbr>)</span> <span class="tamano"> (0.30 MB) </span></div>
</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-24">
<header class="nodeDecoration">
<h1 id="exenode_24_73Bloqueosautomticos" class="nodeTitle">7.3.- Bloqueos automáticos.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id53-24">
<div class="iDevice emphasis0">
<div id="ta53_73" class="block iDevice_content">
<div class="elemento_derecha">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R41_BLOQUEOS_DML_DDL.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R41_BLOQUEOS_DML_DDL_miniatura.png" alt="Tablas con candados." title="Bloqueos automáticos. Pulsar para ampliar" class="imagen_ampliable" width="200" height="125" style="width: 200px; height: 125px;"></a>
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/Tango_icons" target="_blank" class="author" title="Accede a la web de la imagen (se abre en una ventana nueva)" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
<p>La base de datos Oracle bloquea automáticamente un recurso usado por una transacción para prevenir que otras transacciones realicen alguna acción que requiera acceso exclusivo sobre el mismo recurso. La base de datos adquiere automáticamente diferentes tipo de bloqueos con diferentes niveles de restricción dependiendo del recurso y de la operación que se realice.</p>
<p>Los bloqueos que realiza la base de datos Oracle están divididos en las siguientes categorías:</p>
<ul class="lista_verificacion">
<li><strong>Bloqueos DML</strong>: Protegen los datos, garantizando la integridad de los datos accedidos de forma concurrente por varios usuarios. Por ejemplo, evitan que dos clientes compren el último artículo disponible en una tienda <span lang="en">online</span>. Estos bloqueos pueden ser sobre un sólo registro o sobre la tabla completa.&nbsp;<span>Las sentencias DML: <code>INSERT, UPDATE o DELETE</code>, realizan un bloqueo exclusivo por la filas afectadas por su cláusula <code>WHERE</code>. Ocurre lo mismo con la sentencia <code>SELECT ……..FOR UPDATE</code></span></li>
<li><strong>Bloqueos DDL</strong>: Protegen la definición del esquema de un objeto mientras una operación DDL actúa sobre él. Los bloqueos se realizan de manera automática por cualquier transacción DDL que lo requiera. Los usuarios no pueden solicitar explícitamente un bloqueo DDL.</li>
<li><strong>Bloqueos del sistema</strong>: La base de datos Oracle usa varios tipos de bloqueos del sistema para proteger la base de datos interna y las estructuras de memoria.</li>
</ul>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id54-24">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta54_47" class="block iDevice_content">
<p>Definición de bloqueo automático, exclusivo y compartido.</p>
<p class="enlace_centrado"><a class="documento" href="http://mioracle.blogspot.com/2008/03/bloqueo-base-de-datos.html" title="Acceder a una web sobre bloqueos automáticos en Oracle (se abre en una ventana nueva)" target="_blank" rel="noopener">Bloqueo automático.</a></p>
</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-25">
<header class="nodeDecoration">
<h1 id="exenode_25_74Bloqueosmanuales" class="nodeTitle">7.4.- Bloqueos manuales.</h1>
</header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id55-25">
<div class="iDevice emphasis0">
<div id="ta55_73" class="block iDevice_content">
<div class="elemento_derecha">
<figure class="exe-figure exe-image float-right license-custom" style="width: 200px;"><a href="https://fpadistancia.educantabria.es/aula/pluginfile.php/156763/mod_resource/content/5/BD05_Contenidos_Imprimible/BD05_CONT_R42_BLOQUEOS_TABLE_REG.png" title="Ampliar imagen." rel="lightbox"><img src="./BD05 - Tratamiento de datos_files/BD05_CONT_R42_BLOQUEOS_TABLE_REG_miniatura.png" alt="Dos tablas con candados." title=" Bloqueos de tabla y registros. Pulsar para ampliar" class="imagen_ampliable" width="200" height="86" style="width: 200px; height: 86px;"></a>
<figcaption class="figcaption"><a href="http://commons.wikimedia.org/wiki/Tango_icons" target="_blank" class="author" rel="noopener">Sasa Stefanovic</a> <span class="license"><span class="sep">(</span><span class="custom-license">Uso educativo nc</span><span class="sep">)</span></span></figcaption>
</figure>
</div>
<p>Hemos visto que la base de datos Oracle realiza bloqueos de forma automática para asegurar la concurrencia de datos, su integridad y consistencia en la consulta de datos. Sin embargo, también puedes omitir los mecanismos de bloqueo que realiza por defecto la base de datos Oracle. Esto puede ser útil en situaciones como las siguientes:</p>
<ul class="lista_verificacion">
<li>En aplicaciones que requieren consistencia en la consulta de datos a nivel de transacciones o en lecturas repetitivas: En este caso, las consultas obtienen datos consistentes en la duración de la transacción, sin reflejar los cambios realizados por otras transacciones.</li>
<li>En aplicaciones que requieren que una transacción tenga acceso exclusivo a un recurso con el fin de que no tenga que esperar que otras transacciones finalicen.</li>
</ul>
<p>La cancelación de los bloqueos automáticos se pueden realizar a nivel de sesión o de transacción. En el nivel de sesión, una sesión puede establecer el nivel requerido de aislamiento de la transacción con la sentencia <code><em>ALTER SESSION</em></code>. En el nivel de transacción, las transacciones que incluyan las siguientes sentencias SQL omiten el bloqueo por defecto:</p>
<ul class="lista_verificacion">
<li><code>SET TRANSACTION ISOLATION LEVEL</code></li>
<li><code>LOCK TABLE</code></li>
<li><code>SELECT...FOR UPDATE</code></li>
</ul>
<p>Los bloqueos que establecen las sentencias anteriores terminan una vez que la transacción ha finalizado.</p>
</div>
</div>
</article>
<article class="iDevice_wrapper ParasabermasfpdIdevice em_iDevice" id="id56-25">
<div class="iDevice emphasis_parasabermasfpd">
<header class="iDevice_header" style="background-image:url(icon_parasabermasfpd.png)"><h2 class="iDeviceTitle">Para saber más</h2></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta56_47" class="block iDevice_content">
<p>Definición y ejemplos sobre transacciones y control de concurrencia con bloqueos manuales.</p>
<div class="enlace_centrado"><a class="pdf" href="https://fdocuments.es/document/transacciones-55848fb3276d9.html" title="Acceder a documento sobre Transacciones y control de concurrencia de Héctor Gómez Gauchía.(se abre en una ventana nueva)" target="_blank" rel="noopener">Transacciones y control de concurrencia.</a> <span class="tamano"> (0.08 MB) </span></div>
</div>
</div>
</div>
</div>
</article>
</article>
<article class="node level-3-node" id="exe-node-27">
<header class="nodeDecoration">
<h1 id="exenode_27_75Interbloqueos" class="nodeTitle">7.5.- Interbloqueos</h1>
</header>
<article class="iDevice_wrapper textIdevice" id="id63-27">
<div class="iDevice emphasis0">
<div id="ta63_109_2" class="block iDevice_content">

</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice" id="id64-27">
<div class="iDevice emphasis0">
<div id="ta64_110_2" class="block iDevice_content">
<div class="exe-text"><p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace"><b>Ejemplo de interbloqueo entre dos tablas</b><span>&nbsp;</span><strong>con cancelación de bloqueo automático a nivel de transacción</strong></span></span><strong><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">.</span></span></strong></p>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Intentamos crear dos tablas con referencias cruzadas, es decir, la primera hace referencia a la segunda que aún no está creada y viceversa. Vamos a solucionar el problema del interbloqueo considerando la transacción como <code>DEFERRED</code>, es decir la comprobación de las restricciones se hará en diferido.</span></span></p>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Si creo la primera tabla y hago referencia a la segunda, se producirá un error, aún no existe la segunda tabla:</span></span></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Gallina<span class="token punctuation">(</span>

idGallina number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>

idHuevo number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token keyword">REFERENCES</span> Huevo<span class="token punctuation">(</span>idHuevo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Huevo<span class="token punctuation">(</span>

idHuevo number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>

idGallina number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Gallina<span class="token punctuation">(</span>idGallina<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
</div>
</div>
<p><br><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Informe de error -,</span></span></p>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Error SQL: ORA-00942: la tabla o vista no existe</span></span></p>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">00942. 00000 - "table or view does not exist"</span></span></p>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace"><span>*Cause:</span></span></span></p>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Podemos crear ambas tablas sólo especificando cual es la PK en cada una y a continuación<code> ALTER TABLE</code> para añadirle la referencia a la otra tabla.</span></span></p>
<p></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Gallina<span class="token punctuation">(</span>

idGallina number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>

idHuevo  number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Huevo<span class="token punctuation">(</span>

idHuevo  number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>

idGallina  number<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Gallina <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fkRefHuevo

<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>idHuevo<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Huevo<span class="token punctuation">(</span>idHuevo<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Huevo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fkRefGallina

<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>idGallina<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Gallina<span class="token punctuation">(</span>idGallina<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<p><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Intentamos insertar un registro en cada una:</span></span></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Gallina <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Huevo <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<p><br><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Da error en las órdenes de inserción, ya que al insertar en la primera tabla, aún no tenemos dato en la segunda y exactamente igual al insertar en la segunda.</span></span></p>
<p><span><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Si añadimos&nbsp;</span></span><code><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">INITIALLY DEFERRED</span></span><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">&nbsp;</span></span></code><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">después de&nbsp;<code> REFERENCES</code>&nbsp;</span></span><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">en la orden <code>ALTER TABLE&nbsp;</code></span></span><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">la comprobación se hará después de <code>commit&nbsp;</code></span></span><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">y aunque aún no existan datos en la segunda tabla&nbsp;</span></span><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">nos permitirá insertar el registro en la primera.</span></span></span></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Gallina <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fkRefHuevo

<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>idHuevo<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Huevo<span class="token punctuation">(</span>idHuevo<span class="token punctuation">)</span> INITIALLY DEFERRED<span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Huevo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fkRefGallina

<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>idGallina<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Gallina<span class="token punctuation">(</span>idGallina<span class="token punctuation">)</span> INITIALLY DEFERRED<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Gallina <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Huevo <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>

</code></pre>
</div>
</div>
<p><br><span color="#333333"><span face="Menlo, Monaco, Consolas, Courier New, monospace">Las sentencias&nbsp; para borrar las constraints&nbsp; y las tablas tras el ejemplo, son: </span></span></p>
<div class="highlighted-code code-style-2 language-sql">
<div>
<pre class="  language-sql"><code class="  language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Huevo <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> fkRefGallina<span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Gallina <span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span> fkRefHuevo<span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> Huevo<span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> Gallina<span class="token punctuation">;</span></code></pre>
</div>
</div>
<p></p></div>
</div>
</div>
</article>
</article>
</section>


</div>
<script type="text/javascript" src="./BD05 - Tratamiento de datos_files/_fpd_js.js.descarga"></script>
</body></html>